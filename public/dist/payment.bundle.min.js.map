{"version":3,"sources":["webpack:///payment.bundle.min.js","webpack:///./public/js/apps/payment/main.js","webpack:///./public/js/apps/payment/app.jsx","webpack:///./public/js/views/login.jsx","webpack:///./public/js/views/purchase.jsx","webpack:///./public/js/views/add-subscription.jsx","webpack:///./public/js/components/product-detail.jsx","webpack:///./public/js/views/card-listing.jsx","webpack:///./public/js/components/card-choice.jsx","webpack:///./public/js/views/complete-payment.jsx"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_jquery","_jquery2","_tracking","_tracking2","_app","ajaxSetup","dataType","init",267,"_interopRequireWildcard","newObj","key","Object","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","__proto__","_react2","render","createElement","_reactRedux","Provider","store","_dataStore2","PaymentApp","document","body","defineProperty","_extends","assign","target","i","arguments","length","source","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","undefined","Function","getOwnPropertyDescriptor","get","getPrototypeOf","_react","_redux","_dataStore","_componentsError","_componentsError2","_viewsLogin","_viewsLogin2","_viewsPurchase","_viewsPurchase2","_actionsUser","userActions","_utils","_Component","this","qs","parseQuery","win","location","href","state","accessToken","access_token","productId","product","Login","PropTypes","func","isRequired","Purchase","window","app","user","Connector","select","selectData","connector","error","console","log","signedIn","bindActionCreators","dispatch","Component",268,"_componentsSpinner","_componentsSpinner2","apply","setPage","tokenSignIn","text","gettext","string",269,"_actionsPurchase","purchaseActions","_actionsSubscriptions","subscriptionActions","_viewsAddSubscription","_viewsAddSubscription2","_viewsCardListing","_viewsCardListing2","_viewsCompletePayment","_viewsCompletePayment2","_viewsBraintreeToken","_viewsBraintreeToken2","purchase","result","BraintreeToken","CompletePayment","CardListing","AddSubscription","completed","userEmail","email","payMethods","braintreeToken","_bindActionCreators","createSubscription","cardSubmissionErrors","_this","renderChild",270,"_componentsCardForm","_componentsCardForm2","_componentsProductDetail","_componentsProductDetail2","creditCard","className","submissionErrors","submitPrompt","handleCardSubmit","card","id","method",271,"_products","products","ProductDetail","productData","seller","name","en","description","price",272,"_componentsCardChoice","_componentsCardChoice2","cards","onClick","payWithNewCard","array",273,"_componentsCardList","_componentsCardList2","_componentsSubmitButton","_componentsSubmitButton2","CardChoice","handleSubmit","e","preventDefault","setState","isSubmitting","ajax","data","pay_method_uri","plan_id","url","context","done","complete","fail","handleCardChange","resource_uri","arrayOf","shape","number","truncated_id","type_name","cardData","checked","formIsValid","onSubmit","onCardChange","isDisabled","showSpinner",274,"handleClick","postMessage","JSON","stringify","event"],"mappings":"AAAAA,cAAc,IAER,EACA,SAASC,EAAQC,EAASC,GAE/B,YAEA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,GAAIG,GAAUL,ECTD,GDWTM,EAAWL,EAAuBI,GAElCE,EAAYP,ECZI,KDchBQ,EAAaP,EAAuBM,GAEpCE,EAAOT,ECfoB,IAGhCM,GAAA,WAAEI,WACAC,SAAU,SAGZH,EAAA,WAASI,OACTH,EARSG,QD2BHC,IACA,SAASf,EAAQC,EAASC,GAE/B,YAcA,SAASc,GAAwBZ,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIa,KAAa,IAAW,MAAPb,EAAe,IAAK,GAAIc,KAAOd,GAAWe,OAAOC,UAAUC,eAAeC,KAAKlB,EAAKc,KAAMD,EAAOC,GAAOd,EAAIc,GAAmC,OAAzBD,GAAO,WAAab,EAAYa,EAErQ,QAASd,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIH,WAAU,iEAAoEG,GAAeD,GAASR,UAAYD,OAAOW,OAAOD,GAAcA,EAAWT,WAAaW,aAAeC,MAAOJ,EAAUK,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeN,IAAYD,EAASQ,UAAYP,GEgCrZ,QAASf,KACduB,EAAA,WAAMC,OACJD,EAAA,WAAAE,cFmFCC,EErKeC,UAkFNC,MAAKC,EAAA,YACZ,WACC,MAAON,GAAA,WAAAE,cAACK,EAAU,QAGrBC,SAASC,MFzDb3B,OAAO4B,eAAe9C,EAAS,cAC7B+B,OAAO,GAGT,IAAIgB,GAAW7B,OAAO8B,QAAU,SAAUC,GAAU,IAAK,GAAIC,GAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,GAAIG,GAASF,UAAUD,EAAI,KAAK,GAAIjC,KAAOoC,GAAcnC,OAAOC,UAAUC,eAAeC,KAAKgC,EAAQpC,KAAQgC,EAAOhC,GAAOoC,EAAOpC,IAAY,MAAOgC,IAEnPK,EAAe,WAAe,QAASC,GAAiBN,EAAQO,GAAS,IAAK,GAAIN,GAAI,EAAGA,EAAIM,EAAMJ,OAAQF,IAAK,CAAE,GAAIO,GAAaD,EAAMN,EAAIO,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAWvB,cAAe,EAAU,SAAWuB,KAAYA,EAAWxB,UAAW,GAAMf,OAAO4B,eAAeG,EAAQQ,EAAWxC,IAAKwC,IAAiB,MAAO,UAAUjC,EAAakC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiB/B,EAAYL,UAAWuC,GAAiBC,GAAaJ,EAAiB/B,EAAamC,GAAqBnC,MAE7hBoC,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKK,GAAOC,EAASC,EAASC,OAAWP,GAAS,EAAsB,OAAXC,IAAiBA,EAASO,SAASrD,UAAW,IAAIiD,GAAOlD,OAAOuD,yBAAyBR,EAAQC,EAAW,IAAaK,SAATH,EAAJ,CAAiN,GAAI,SAAWA,GAAQ,MAAOA,GAAKrC,KAAgB,IAAIuC,GAASF,EAAKM,GAAK,OAAeH,UAAXD,EAA+BC,OAAoBD,EAAOjD,KAAK8C,GAApU,GAAIE,GAASnD,OAAOyD,eAAeV,EAAS,IAAe,OAAXI,EAAmB,MAAOE,OAAoBV,GAAKQ,EAAQP,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,GAE1dhE,GEwCea,OF9BfZ,EEtDM,EFwDN,IAAI2E,GAAS3E,EEtD8B,IFwDvCmC,EAAUlC,EAAuB0E,GAEjCrC,EAActC,EExDiB,KF0D/B4E,EAAS5E,EEzDqB,KF2D9B6E,EAAa7E,EEzDI,KF2DjByC,EAAcxC,EAAuB4E,GAErCC,EAAmB9E,EE5DC,KF8DpB+E,EAAoB9E,EAAuB6E,GAE3CE,EAAchF,EE/DM,KFiEpBiF,EAAehF,EAAuB+E,GAEtCE,EAAiBlF,EElEM,KFoEvBmF,EAAkBlF,EAAuBiF,GAEzCE,EAAepF,EEpES,KAAjBqF,EAAWvE,EAAAsE,GFwElBE,EAAStF,EEvEa,KAGN0C,EAAU,SAAA6C,GAclB,QAdQ7C,GAcPa,GF8ETlC,EAAgBmE,KE5FA9C,GAejBiB,EAAA1C,OAAAyD,eAfiBhC,EAAUxB,WAAA,cAAAsE,MAAApE,KAAAoE,KAerBjC,EACN,IAAIkC,GAAKH,EAnBJI,WAmBenC,EAAMoC,IAAIC,SAASC,KAEvCL,MAAKM,OACHC,YAAaN,EAAGO,aAChBC,UAAWR,EAAGS,SF8HjB,MA3EAzE,GEvEkBiB,EAAU6C,GFyE5BlC,EEzEkBX,EAAU,OF0E1B1B,IAAK,YACLc,OExEDqE,MAAOxB,EAjBgByB,UAiBNC,KAAKC,WACtBC,SAAU5B,EAlBayB,UAkBHC,KAAKC,WACzBX,IAAKhB,EAnBkByB,UAmBRpC,QF2EdjC,YAAY,IAEZf,IAAK,eACLc,OE1EDqE,MAAKlB,EAAA,WACLsB,SAAQpB,EAAA,WACRQ,IAAKa,QF6EJzE,YAAY,KAedsB,EEvGkBX,IFwGhB1B,IAAK,aACLc,MEjFO,SAACgE,GACT,OACEW,IAAKX,EAAMW,IACXC,KAAMZ,EAAMY,SFqFb1F,IAAK,SACLc,MElFG,WACJ,GAAIgE,GAAQN,KAAKM,MACbK,EAAQX,KAAKjC,MAAM4C,MACnBI,EAAWf,KAAKjC,MAAMgD,QAE1B,OACEpE,GAAA,WAAAE,cFkFG,OACA,KElFDF,EAAA,WAAAE,cFoFGC,EEtIFqE,WAkDUC,OAAQpB,KAAKqB,YACrB,SAAAC,GACC,MAAIA,GAAUL,IAAIM,OAChBC,QAAQC,IAAI,uBACL9E,EAAA,WAAAE,cAAA0C,EAAA,YAAcgC,MAAOD,EAAUL,IAAIM,SAChCD,EAAUJ,KAAKQ,UASzBF,QAAQC,IAAI,2BAEV9E,EAAA,WAAAE,cAACkE,GACCN,UAAWH,EAAMG,UACjBS,KAAMI,EAAUJ,SAZpBM,QAAQC,IAAI,mBAEV9E,EAAA,WAAAE,cAAC8D,EAAKrD,GACJiD,YAAaD,EAAMC,aACfnB,EA3DbuC,mBA2DgC9B,EAAayB,EAAUM,oBAhD3C1E,GFmJjBiC,EEjKY0C,UFmKftH,GAAQ,WErJY2C,GFmKf4E,IACA,SAASxH,EAAQC,EAASC,GAE/B,YAUA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIH,WAAU,iEAAoEG,GAAeD,GAASR,UAAYD,OAAOW,OAAOD,GAAcA,EAAWT,WAAaW,aAAeC,MAAOJ,EAAUK,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeN,IAAYD,EAASQ,UAAYP,GAZ3ZV,OAAO4B,eAAe9C,EAAS,cAC7B+B,OAAO,GAGT,IAAIuB,GAAe,WAAe,QAASC,GAAiBN,EAAQO,GAAS,IAAK,GAAIN,GAAI,EAAGA,EAAIM,EAAMJ,OAAQF,IAAK,CAAE,GAAIO,GAAaD,EAAMN,EAAIO,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAWvB,cAAe,EAAU,SAAWuB,KAAYA,EAAWxB,UAAW,GAAMf,OAAO4B,eAAeG,EAAQQ,EAAWxC,IAAKwC,IAAiB,MAAO,UAAUjC,EAAakC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiB/B,EAAYL,UAAWuC,GAAiBC,GAAaJ,EAAiB/B,EAAamC,GAAqBnC,MAE7hBoC,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKK,GAAOC,EAASC,EAASC,OAAWP,GAAS,EAAsB,OAAXC,IAAiBA,EAASO,SAASrD,UAAW,IAAIiD,GAAOlD,OAAOuD,yBAAyBR,EAAQC,EAAW,IAAaK,SAATH,EAAJ,CAAiN,GAAI,SAAWA,GAAQ,MAAOA,GAAKrC,KAAgB,IAAIuC,GAASF,EAAKM,GAAK,OAAeH,UAAXD,EAA+BC,OAAoBD,EAAOjD,KAAK8C,GAApU,GAAIE,GAASnD,OAAOyD,eAAeV,EAAS,IAAe,OAAXI,EAAmB,MAAOE,OAAoBV,GAAKQ,EAAQP,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,IAQtdY,EAAS3E,EGtM8B,IHwMvCmC,EAAUlC,EAAuB0E,GAEjC4C,EAAqBvH,EGxMN,KH0MfwH,EAAsBvH,EAAuBsH,GAE7CjC,EAAStF,EG1MU,KH4MnBO,EAAYP,EG3MI,KH6MhBQ,EAAaP,EAAuBM,GG1MpB4F,EAAK,SAAAZ,GH+MvB,QG/MkBY,KHgNhB9E,EAAgBmE,KGhNAW,GHkNhBxC,EAAK1C,OAAOyD,eGlNIyB,EAAKjF,WAAA,cAAAsE,MAAAiC,MAAAjC,KAAAtC,WHyOvB,MA5BAzB,GG7MkB0E,EAAKZ,GHqNvBlC,EGrNkB8C,IHsNhBnF,IAAK,oBACLc,MGhNc,WACftB,EAAA,WAASkH,QAAQ,UACjBlC,KAAKjC,MAAMoE,YAAYnC,KAAKjC,MAAMwC,gBHmNjC/E,IAAK,SACLc,MGjNG,WACJ,MAAOK,GAAA,WAAAE,cAAAmF,EAAA,YAASI,KAAMtC,EAjBjBuC,QAiByB,qBHoN7B7G,IAAK,YACLc,OG/NDiE,YAAapB,EAXUyB,UAWA0B,OAAOxB,WAC9BqB,YAAahD,EAZUyB,UAYAC,KAAKC,YHkO3BvE,YAAY,KGtOIoE,GH0OjBxB,EGlPY0C,UHoPftH,GAAQ,WG5OYoG,EH6OpBrG,EAAOC,QAAUA,EAAQ,YAIpBgI,IACA,SAASjI,EAAQC,EAASC,GAE/B,YAYA,SAASc,GAAwBZ,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIa,KAAa,IAAW,MAAPb,EAAe,IAAK,GAAIc,KAAOd,GAAWe,OAAOC,UAAUC,eAAeC,KAAKlB,EAAKc,KAAMD,EAAOC,GAAOd,EAAIc,GAAmC,OAAzBD,GAAO,WAAab,EAAYa,EAErQ,QAASd,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIH,WAAU,iEAAoEG,GAAeD,GAASR,UAAYD,OAAOW,OAAOD,GAAcA,EAAWT,WAAaW,aAAeC,MAAOJ,EAAUK,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeN,IAAYD,EAASQ,UAAYP,GAhB3ZV,OAAO4B,eAAe9C,EAAS,cAC7B+B,OAAO,GAGT,IAAIgB,GAAW7B,OAAO8B,QAAU,SAAUC,GAAU,IAAK,GAAIC,GAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,GAAIG,GAASF,UAAUD,EAAI,KAAK,GAAIjC,KAAOoC,GAAcnC,OAAOC,UAAUC,eAAeC,KAAKgC,EAAQpC,KAAQgC,EAAOhC,GAAOoC,EAAOpC,IAAY,MAAOgC,IAEnPK,EAAe,WAAe,QAASC,GAAiBN,EAAQO,GAAS,IAAK,GAAIN,GAAI,EAAGA,EAAIM,EAAMJ,OAAQF,IAAK,CAAE,GAAIO,GAAaD,EAAMN,EAAIO,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAWvB,cAAe,EAAU,SAAWuB,KAAYA,EAAWxB,UAAW,GAAMf,OAAO4B,eAAeG,EAAQQ,EAAWxC,IAAKwC,IAAiB,MAAO,UAAUjC,EAAakC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiB/B,EAAYL,UAAWuC,GAAiBC,GAAaJ,EAAiB/B,EAAamC,GAAqBnC,MAE7hBoC,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKK,GAAOC,EAASC,EAASC,OAAWP,GAAS,EAAsB,OAAXC,IAAiBA,EAASO,SAASrD,UAAW,IAAIiD,GAAOlD,OAAOuD,yBAAyBR,EAAQC,EAAW,IAAaK,SAATH,EAAJ,CAAiN,GAAI,SAAWA,GAAQ,MAAOA,GAAKrC,KAAgB,IAAIuC,GAASF,EAAKM,GAAK,OAAeH,UAAXD,EAA+BC,OAAoBD,EAAOjD,KAAK8C,GAApU,GAAIE,GAASnD,OAAOyD,eAAeV,EAAS,IAAe,OAAXI,EAAmB,MAAOE,OAAoBV,GAAKQ,EAAQP,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,IAUtdY,EAAS3E,EIhR8B,IJkRvCmC,EAAUlC,EAAuB0E,GAEjCC,EAAS5E,EIlRqB,KJoR9BsC,EAActC,EInRO,KJqRrBgI,EAAmBhI,EInRS,GAArBiI,EAAenH,EAAAkH,GJuRtB5C,EAAepF,EItRS,KAAjBqF,EAAWvE,EAAAsE,GJ0RlB8C,EAAwBlI,EIzRQ,GAAzBmI,EAAmBrH,EAAAoH,GJ6R1BE,EAAwBpI,EI3RM,KJ6R9BqI,EAAyBpI,EAAuBmI,GAEhDE,EAAoBtI,EI9RM,KJgS1BuI,EAAqBtI,EAAuBqI,GAE5CE,EAAwBxI,EIjSM,KJmS9ByI,EAAyBxI,EAAuBuI,GAEhDE,EAAuB1I,EIpSM,KJsS7B2I,EAAwB1I,EAAuByI,GInS/BnC,EAAQ,SAAAhB,GJwS1B,QIxSkBgB,KJyShBlF,EAAgBmE,KIzSAe,GJ2ShB5C,EAAK1C,OAAOyD,eI3SI6B,EAAQrF,WAAA,cAAAsE,MAAAiC,MAAAjC,KAAAtC,WJ8X1B,MAxFAzB,GItSkB8E,EAAQhB,GJ8S1BlC,EI9SkBkD,IJ+ShBvF,IAAK,aACLc,MI9RO,SAACgE,GACT,OACE8C,SAAU9C,EAAM8C,SAChBlC,KAAMZ,EAAMY,SJkSb1F,IAAK,cACLc,MI/RQ,SAAC+G,GACV,GAAItF,GAAQiC,KAAKjC,MACbuF,EAAiBvF,EAAMuF,eACvBC,EAAkBxF,EAAMwF,gBACxBC,EAAczF,EAAMyF,YACpBC,EAAkB1F,EAAM0F,eAE5B,IAAIJ,EAAOD,SAASM,UAClB,MACE/G,GAAA,WAAAE,cAAC0G,GACC9C,UAAW1C,EAAM0C,UACjBkD,UAAW5F,EAAMmD,KAAK0C,OAErB,IAAIP,EAAOD,SAASS,YAChBR,EAAOD,SAASS,WAAWlG,OAAS,EAE7C,MADA6D,SAAQC,IAAI,0BAEV9E,EAAA,WAAAE,cAAC2G,EAAWlG,GACVmD,UAAW1C,EAAM0C,UACjBoD,WAAYR,EAAOnC,KAAK2C,YACpBzE,EA1DLuC,mBA0DwBc,EAAiBY,EAAOzB,WAG9C,IAAKyB,EAAOnC,KAAK4C,eAOjB,CACLtC,QAAQC,IAAI,uBJuRT,IAAIsC,GItRsB3E,EAtE1BuC,mBAsE6CgB,EACAU,EAAOzB,UADjDoC,EAAkBD,EAAlBC,kBAEN,OACErH,GAAA,WAAAE,cAAC4G,GACCQ,qBAAsBZ,EAAOD,SAASa,qBACtCH,eAAgBT,EAAOnC,KAAK4C,eAC5BE,mBAAoBA,EACpBvD,UAAW1C,EAAM0C,YAdrB,MADAe,SAAQC,IAAI,8BAEV9E,EAAA,WAAAE,cAACyG,EACKlE,EAjELuC,mBAiEwB9B,EAAawD,EAAOzB,cJwShDpG,IAAK,SACLc,MIvRI,WJwRF,GAAI4H,GAAQlE,IIvRf,OACErD,GAAA,WAAAE,cJyRGC,EI7WAqE,WAoFQC,OAAQpB,KAAKqB,YACrB,SAACgC,GJ2RC,MI3RUa,GAAKC,YAAYd,UJgSjC7H,IAAK,YACLc,OIvWDmH,gBAAiBtE,EAlBMyB,UAkBIC,KAAKC,WAChCwC,eAAgBnE,EAnBOyB,UAmBGC,KAAKC,WAC/B0C,YAAarE,EApBUyB,UAoBAC,KAAKC,WAC5ByC,gBAAiBpE,EArBMyB,UAqBIC,KAAKC,WAChCL,UAAWtB,EAtBYyB,UAsBF0B,OAAOxB,WAC5BI,KAAM/B,EAvBiByB,UAuBPpC,OAAOsC,YJ0WtBvE,YAAY,IAEZf,IAAK,eACLc,OIzWDmH,gBAAeZ,EAAA,WACfW,YAAWT,EAAA,WACXQ,gBAAeN,EAAA,WACfK,eAAcH,EAAA,YJ4Wb5G,YAAY,KI3XIwE,GJ+XjB5B,EI9YY0C,UJgZftH,GAAQ,WIjYYwG,EJkYpBzG,EAAOC,QAAUA,EAAQ,YAIpB6J,IACA,SAAS9J,EAAQC,EAASC,GAE/B,YAUA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIH,WAAU,iEAAoEG,GAAeD,GAASR,UAAYD,OAAOW,OAAOD,GAAcA,EAAWT,WAAaW,aAAeC,MAAOJ,EAAUK,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeN,IAAYD,EAASQ,UAAYP,GAZ3ZV,OAAO4B,eAAe9C,EAAS,cAC7B+B,OAAO,GAGT,IAAIuB,GAAe,WAAe,QAASC,GAAiBN,EAAQO,GAAS,IAAK,GAAIN,GAAI,EAAGA,EAAIM,EAAMJ,OAAQF,IAAK,CAAE,GAAIO,GAAaD,EAAMN,EAAIO,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAWvB,cAAe,EAAU,SAAWuB,KAAYA,EAAWxB,UAAW,GAAMf,OAAO4B,eAAeG,EAAQQ,EAAWxC,IAAKwC,IAAiB,MAAO,UAAUjC,EAAakC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiB/B,EAAYL,UAAWuC,GAAiBC,GAAaJ,EAAiB/B,EAAamC,GAAqBnC,MAE7hBoC,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKK,GAAOC,EAASC,EAASC,OAAWP,GAAS,EAAsB,OAAXC,IAAiBA,EAASO,SAASrD,UAAW,IAAIiD,GAAOlD,OAAOuD,yBAAyBR,EAAQC,EAAW,IAAaK,SAATH,EAAJ,CAAiN,GAAI,SAAWA,GAAQ,MAAOA,GAAKrC,KAAgB,IAAIuC,GAASF,EAAKM,GAAK,OAAeH,UAAXD,EAA+BC,OAAoBD,EAAOjD,KAAK8C,GAApU,GAAIE,GAASnD,OAAOyD,eAAeV,EAAS,IAAe,OAAXI,EAAmB,MAAOE,OAAoBV,GAAKQ,EAAQP,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,IAQtdY,EAAS3E,EKxa8B,IL0avCmC,EAAUlC,EAAuB0E,GAEjCkF,EAAsB7J,EK1aN,KL4ahB8J,EAAuB7J,EAAuB4J,GAE9CE,EAA2B/J,EK7aN,KL+arBgK,EAA4B/J,EAAuB8J,GAEnDxJ,EAAYP,EKhbmB,KLkb/BQ,EAAaP,EAAuBM,GAEpC+E,EAAStF,EKnbU,KAGHiJ,EAAe,SAAA1D,GLqbjC,QKrbkB0D,KLsbhB5H,EAAgBmE,KKtbAyD,GLwbhBtF,EAAK1C,OAAOyD,eKxbIuE,EAAe/H,WAAA,cAAAsE,MAAAiC,MAAAjC,KAAAtC,WLqejC,MAlDAzB,GKnbkBwH,EAAe1D,GL2bjClC,EK3bkB4F,IL4bhBjI,IAAK,oBACLc,MKpbc,WACftB,EAAA,WAASkH,QAAQ,wBLubhB1G,IAAK,mBACLc,MKrba,SAACmI,GACfjD,QAAQC,IAAI,qDACAzB,KAAKjC,MAAM0C,WACvBT,KAAKjC,MAAMiG,mBAAmBhE,KAAKjC,MAAM+F,eACX9D,KAAKjC,MAAM0C,UACXgE,MLqb7BjJ,IAAK,SACLc,MKnbG,WLobD,GAAI4H,GAAQlE,IKnbf,OACErD,GAAA,WAAAE,cLqbG,OKrbE6H,UAAU,gBACb/H,EAAA,WAAAE,cAAA2H,EAAA,YAAe/D,UAAWT,KAAKjC,MAAM0C,YACrC9D,EAAA,WAAAE,cAAAyH,EAAA,YACEK,iBAAkB3E,KAAKjC,MAAMkG,qBAC7BW,aAAc9E,EA9BfuC,QA8BuB,aACtBwC,iBAAkB,SAACC,GLubhB,MKvbyBZ,GAAKW,iBAAiBC,IAClDC,GAAG,iBACHC,OAAO,eL6bZxJ,IAAK,YACLc,OKzdDwH,eAAgB3E,EAXOyB,UAWG0B,OAAOxB,WACjCmD,qBAAsB9E,EAZCyB,UAYSpC,OAChCwF,mBAAoB7E,EAbGyB,UAaOC,KAAKC,WACnCL,UAAWtB,EAdYyB,UAcF0B,OAAOxB,YL4d3BvE,YAAY,KKleIkH,GLsejBtE,EK9eY0C,ULgfftH,GAAQ,WKxeYkJ,ELyepBnJ,EAAOC,QAAUA,EAAQ,YAIpB0K,IACA,SAAS3K,EAAQC,EAASC,GAE/B,YAUA,SAASc,GAAwBZ,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIa,KAAa,IAAW,MAAPb,EAAe,IAAK,GAAIc,KAAOd,GAAWe,OAAOC,UAAUC,eAAeC,KAAKlB,EAAKc,KAAMD,EAAOC,GAAOd,EAAIc,GAAmC,OAAzBD,GAAO,WAAab,EAAYa,EAErQ,QAASd,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIH,WAAU,iEAAoEG,GAAeD,GAASR,UAAYD,OAAOW,OAAOD,GAAcA,EAAWT,WAAaW,aAAeC,MAAOJ,EAAUK,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeN,IAAYD,EAASQ,UAAYP,GAd3ZV,OAAO4B,eAAe9C,EAAS,cAC7B+B,OAAO,GAGT,IAAIuB,GAAe,WAAe,QAASC,GAAiBN,EAAQO,GAAS,IAAK,GAAIN,GAAI,EAAGA,EAAIM,EAAMJ,OAAQF,IAAK,CAAE,GAAIO,GAAaD,EAAMN,EAAIO,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAWvB,cAAe,EAAU,SAAWuB,KAAYA,EAAWxB,UAAW,GAAMf,OAAO4B,eAAeG,EAAQQ,EAAWxC,IAAKwC,IAAiB,MAAO,UAAUjC,EAAakC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiB/B,EAAYL,UAAWuC,GAAiBC,GAAaJ,EAAiB/B,EAAamC,GAAqBnC,MAE7hBoC,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKK,GAAOC,EAASC,EAASC,OAAWP,GAAS,EAAsB,OAAXC,IAAiBA,EAASO,SAASrD,UAAW,IAAIiD,GAAOlD,OAAOuD,yBAAyBR,EAAQC,EAAW,IAAaK,SAATH,EAAJ,CAAiN,GAAI,SAAWA,GAAQ,MAAOA,GAAKrC,KAAgB,IAAIuC,GAASF,EAAKM,GAAK,OAAeH,UAAXD,EAA+BC,OAAoBD,EAAOjD,KAAK8C,GAApU,GAAIE,GAASnD,OAAOyD,eAAeV,EAAS,IAAe,OAAXI,EAAmB,MAAOE,OAAoBV,GAAKQ,EAAQP,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,IAUtdY,EAAS3E,EM1gB8B,IN4gBvCmC,EAAUlC,EAAuB0E,GAEjC+F,EAAY1K,EM7gBS,KAAd2K,EAAQ7J,EAAA4J,GNihBfpF,EAAStF,EMhhBU,KAEH4K,EAAa,SAAArF,GNmhB/B,QMnhBkBqF,KNohBhBvJ,EAAgBmE,KMphBAoF,GNshBhBjH,EAAK1C,OAAOyD,eMthBIkG,EAAa1J,WAAA,cAAAsE,MAAAiC,MAAAjC,KAAAtC,WNgkB/B,MA/CAzB,GMjhBkBmJ,EAAarF,GNyhB/BlC,EMzhBkBuH,IN0hBhB5J,IAAK,SACLc,MMrhBG,WAEJ,GAAI+I,GAAcF,EAASlG,IAAIe,KAAKjC,MAAM0C,UAE1C,OACE9D,GAAA,WAAAE,cNqhBG,OMrhBE6H,UAAU,WACb/H,EAAA,WAAAE,cNuhBG,MMvhBC6H,UAAU,SAASW,EAAYC,OAAOC,KAAKC,IAC/C7I,EAAA,WAAAE,cN2hBG,MACA,KM5hBGwI,EAAYI,YAAYD,IAC9B7I,EAAA,WAAAE,cN+hBG,OM/hBE6H,UAAU,SAASW,EAAYK,MAAMF,IAC1C7I,EAAA,WAAAE,cNmiBG,MACA,KMpiBGiD,EAjBLuC,QAiBa,oBN0iBjB7G,IAAK,YACLc,OMvjBDmE,UAAWtB,EAPYyB,UAOF0B,OAAOxB,YN0jB3BvE,YAAY,KM7jBI6I,GNikBjBjG,EMrkBY0C,UNukBftH,GAAQ,WMnkBY6K,ENokBpB9K,EAAOC,QAAUA,EAAQ,YAIpBoL,IACA,SAASrL,EAAQC,EAASC,GAE/B,YAUA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIH,WAAU,iEAAoEG,GAAeD,GAASR,UAAYD,OAAOW,OAAOD,GAAcA,EAAWT,WAAaW,aAAeC,MAAOJ,EAAUK,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeN,IAAYD,EAASQ,UAAYP,GAZ3ZV,OAAO4B,eAAe9C,EAAS,cAC7B+B,OAAO,GAGT,IAAIuB,GAAe,WAAe,QAASC,GAAiBN,EAAQO,GAAS,IAAK,GAAIN,GAAI,EAAGA,EAAIM,EAAMJ,OAAQF,IAAK,CAAE,GAAIO,GAAaD,EAAMN,EAAIO,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAWvB,cAAe,EAAU,SAAWuB,KAAYA,EAAWxB,UAAW,GAAMf,OAAO4B,eAAeG,EAAQQ,EAAWxC,IAAKwC,IAAiB,MAAO,UAAUjC,EAAakC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiB/B,EAAYL,UAAWuC,GAAiBC,GAAaJ,EAAiB/B,EAAamC,GAAqBnC,MAE7hBoC,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKK,GAAOC,EAASC,EAASC,OAAWP,GAAS,EAAsB,OAAXC,IAAiBA,EAASO,SAASrD,UAAW,IAAIiD,GAAOlD,OAAOuD,yBAAyBR,EAAQC,EAAW,IAAaK,SAATH,EAAJ,CAAiN,GAAI,SAAWA,GAAQ,MAAOA,GAAKrC,KAAgB,IAAIuC,GAASF,EAAKM,GAAK,OAAeH,UAAXD,EAA+BC,OAAoBD,EAAOjD,KAAK8C,GAApU,GAAIE,GAASnD,OAAOyD,eAAeV,EAAS,IAAe,OAAXI,EAAmB,MAAOE,OAAoBV,GAAKQ,EAAQP,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,IAQtdY,EAAS3E,EO/lB8B,IPimBvCmC,EAAUlC,EAAuB0E,GAEjCyG,EAAwBpL,EOjmBN,KPmmBlBqL,EAAyBpL,EAAuBmL,GAEhDrB,EAA2B/J,EOpmBN,KPsmBrBgK,EAA4B/J,EAAuB8J,GAEnDzE,EAAStF,EOtmBU,KPwmBnBO,EAAYP,EOvmBI,KPymBhBQ,EAAaP,EAAuBM,GOtmBpByI,EAAW,SAAAzD,GP2mB7B,QO3mBkByD,KP4mBhB3H,EAAgBmE,KO5mBAwD,GP8mBhBrF,EAAK1C,OAAOyD,eO9mBIsE,EAAW9H,WAAA,cAAAsE,MAAAiC,MAAAjC,KAAAtC,WPmpB7B,MA1CAzB,GOzmBkBuH,EAAWzD,GPinB7BlC,EOjnBkB2F,IPknBhBhI,IAAK,oBACLc,MO3mBc,WACftB,EAAA,WAASkH,QAAQ,oBP8mBhB1G,IAAK,SACLc,MO5mBG,WACJ,MACEK,GAAA,WAAAE,cP4mBG,OO5mBE6H,UAAU,gBACb/H,EAAA,WAAAE,cAAA2H,EAAA,YAAe/D,UAAWT,KAAKjC,MAAM0C,YACrC9D,EAAA,WAAAE,cAAAgJ,EAAA,YACEC,MAAO9F,KAAKjC,MAAM8F,WAClBpD,UAAWT,KAAKjC,MAAM0C,YAExB9D,EAAA,WAAAE,cP8mBG,KO9mBA6H,UAAU,uBAAuBrE,KAAK,IACtC0F,QAAS/F,KAAKjC,MAAMiI,gBACpBlG,EA1BFuC,QA0BU,8BPonBd7G,IAAK,YACLc,OOxoBDuH,WAAY1E,EAZWyB,UAYDqF,MAAMnF,WAC5BkF,eAAgB7G,EAbOyB,UAaGC,KAAKC,WAC/BL,UAAWtB,EAdYyB,UAcF0B,OAAOxB,YP2oB3BvE,YAAY,KOhpBIiH,GPopBjBrE,EO7pBY0C,UP+pBftH,GAAQ,WOtpBYiJ,EPupBpBlJ,EAAOC,QAAUA,EAAQ,YAIpB2L,IACA,SAAS5L,EAAQC,EAASC,GAE/B,YAUA,SAASc,GAAwBZ,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIa,KAAa,IAAW,MAAPb,EAAe,IAAK,GAAIc,KAAOd,GAAWe,OAAOC,UAAUC,eAAeC,KAAKlB,EAAKc,KAAMD,EAAOC,GAAOd,EAAIc,GAAmC,OAAzBD,GAAO,WAAab,EAAYa,EAErQ,QAASd,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIH,WAAU,iEAAoEG,GAAeD,GAASR,UAAYD,OAAOW,OAAOD,GAAcA,EAAWT,WAAaW,aAAeC,MAAOJ,EAAUK,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeN,IAAYD,EAASQ,UAAYP,GAd3ZV,OAAO4B,eAAe9C,EAAS,cAC7B+B,OAAO,GAGT,IAAIuB,GAAe,WAAe,QAASC,GAAiBN,EAAQO,GAAS,IAAK,GAAIN,GAAI,EAAGA,EAAIM,EAAMJ,OAAQF,IAAK,CAAE,GAAIO,GAAaD,EAAMN,EAAIO,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAWvB,cAAe,EAAU,SAAWuB,KAAYA,EAAWxB,UAAW,GAAMf,OAAO4B,eAAeG,EAAQQ,EAAWxC,IAAKwC,IAAiB,MAAO,UAAUjC,EAAakC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiB/B,EAAYL,UAAWuC,GAAiBC,GAAaJ,EAAiB/B,EAAamC,GAAqBnC,MAE7hBoC,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKK,GAAOC,EAASC,EAASC,OAAWP,GAAS,EAAsB,OAAXC,IAAiBA,EAASO,SAASrD,UAAW,IAAIiD,GAAOlD,OAAOuD,yBAAyBR,EAAQC,EAAW,IAAaK,SAATH,EAAJ,CAAiN,GAAI,SAAWA,GAAQ,MAAOA,GAAKrC,KAAgB,IAAIuC,GAASF,EAAKM,GAAK,OAAeH,UAAXD,EAA+BC,OAAoBD,EAAOjD,KAAK8C,GAApU,GAAIE,GAASnD,OAAOyD,eAAeV,EAAS,IAAe,OAAXI,EAAmB,MAAOE,OAAoBV,GAAKQ,EAAQP,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,IAUtd1D,EAAUL,EQzrBD,GR2rBTM,EAAWL,EAAuBI,GAElCsE,EAAS3E,EQ5rB8B,IR8rBvCmC,EAAUlC,EAAuB0E,GAEjCgH,EAAsB3L,EQ9rBN,KRgsBhB4L,EAAuB3L,EAAuB0L,GAE9CE,EAA0B7L,EQjsBN,KRmsBpB8L,EAA2B7L,EAAuB4L,GAElDvG,EAAStF,EQnsBU,KRqsBnBgI,EAAmBhI,EQpsBS,GAArBiI,EAAenH,EAAAkH,GRwsBtBnD,EAAa7E,EQtsBI,KRwsBjByC,EAAcxC,EAAuB4E,GQrsBrBkH,EAAU,SAAAxG,GAclB,QAdQwG,GAcPxI,GR2sBT,GAAImG,GAAQlE,IAEZnE,GAAgBmE,KQ3tBAuG,GAejBpI,EAAA1C,OAAAyD,eAfiBqH,EAAU7K,WAAA,cAAAsE,MAAApE,KAAAoE,KAerBjC,GRgtBLiC,KQxsBHwG,aAAe,SAACC,GACdA,EAAEC,iBAEFxC,EAAKyC,UAAUC,cAAc,IAE7B9L,EAAA,WAAE+L,MACAC,MACEC,eAAgB7C,EAAK5D,MAAMwE,KAC3BkC,QAAS9C,EAAKnG,MAAM0C,WAEtBwG,IAAK,gCACLjC,OAAQ,OACR7J,SAAU,OACV+L,QAAOhD,IACNiD,KAAK,WACN3F,QAAQC,IAAI,8CAEZxE,EAAA,WAAU2E,SACRa,EAAgB2E,cAGjBC,KAAK,eR0sBPrH,KQrsBHsH,iBAAmB,SAACb,GAClBvC,EAAKyC,UAAU7B,KAAM2B,EAAEjJ,OAAOlB,SAlC9B0D,KAAKM,OACHsG,cAAc,EACd9B,KAAmC,IAA5B9E,KAAKjC,MAAM+H,MAAMnI,OACjBqC,KAAKjC,MAAM+H,MAAM,GAAGyB,aAAe,MRswB7C,MAjFAtL,GQxsBkBsK,EAAUxG,GR0sB5BlC,EQ1sBkB0I,EAAU,OR2sB1B/K,IAAK,YACLc,OQzsBDwJ,MAAO3G,EAdgByB,UAcN4G,QACfrI,EAfqByB,UAeX6G,OACR1C,GAAI5F,EAhBeyB,UAgBL8G,OACdH,aAAcpI,EAjBKyB,UAiBK0B,OACxBqF,aAAcxI,EAlBKyB,UAkBK0B,OACxBsF,UAAWzI,EAnBQyB,UAmBE0B,UAEtBxB,WACHL,UAAWtB,EAtBYyB,UAsBF0B,OAAOxB,YR0sB3BvE,YAAY,KA2CdsB,EQhwBkB0I,IRiwBhB/K,IAAK,SACLc,MQ7sBG,WAEJ,IAAK,GADDuL,GAAW7H,KAAKjC,MAAM+H,MACjBrI,EAAI,EAAGA,EAAIoK,EAASlK,OAAQF,GAAK,EAAG,CAC3C,GAAIqH,GAAO+C,EAASpK,EACpBqH,GAAKgD,QAAU9H,KAAKM,MAAMwE,OAASA,EAAKyC,aAG1C,GAAIQ,GAAkC,OAApB/H,KAAKM,MAAMwE,IAE7B,OACEnI,GAAA,WAAAE,cR6sBG,QQ7sBGkI,GAAG,eAAeiD,SAAUhI,KAAKwG,cACrC7J,EAAA,WAAAE,cAAAuJ,EAAA,YACEN,MAAO+B,EACPI,aAAcjI,KAAKsH,mBACrB3K,EAAA,WAAAE,cAAAyJ,EAAA,YAAc4B,YAAaH,EACzBI,YAAanI,KAAKM,MAAMsG,aACxBxE,KAAMtC,EA3EPuC,QA2Ee,oBArEHkE,GR0xBjBpH,EQryBY0C,URuyBftH,GAAQ,WQ5xBYgM,ER6xBpBjM,EAAOC,QAAUA,EAAQ,YAIpB6N,IACA,SAAS9N,EAAQC,EAASC,GAE/B,YAUA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAAWF,GAEzF,QAASmB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIH,WAAU,iEAAoEG,GAAeD,GAASR,UAAYD,OAAOW,OAAOD,GAAcA,EAAWT,WAAaW,aAAeC,MAAOJ,EAAUK,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeN,IAAYD,EAASQ,UAAYP,GAZ3ZV,OAAO4B,eAAe9C,EAAS,cAC7B+B,OAAO,GAGT,IAAIuB,GAAe,WAAe,QAASC,GAAiBN,EAAQO,GAAS,IAAK,GAAIN,GAAI,EAAGA,EAAIM,EAAMJ,OAAQF,IAAK,CAAE,GAAIO,GAAaD,EAAMN,EAAIO,GAAWzB,WAAayB,EAAWzB,aAAc,EAAOyB,EAAWvB,cAAe,EAAU,SAAWuB,KAAYA,EAAWxB,UAAW,GAAMf,OAAO4B,eAAeG,EAAQQ,EAAWxC,IAAKwC,IAAiB,MAAO,UAAUjC,EAAakC,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiB/B,EAAYL,UAAWuC,GAAiBC,GAAaJ,EAAiB/B,EAAamC,GAAqBnC,MAE7hBoC,EAAO,SAAaC,EAAIC,EAAKC,GAAqC,IAA9B,GAAIC,IAAS,EAAwBA,GAAQ,CAAE,GAAIC,GAASJ,EAAIK,EAAWJ,EAAKK,EAAWJ,CAAKK,GAAOC,EAASC,EAASC,OAAWP,GAAS,EAAsB,OAAXC,IAAiBA,EAASO,SAASrD,UAAW,IAAIiD,GAAOlD,OAAOuD,yBAAyBR,EAAQC,EAAW,IAAaK,SAATH,EAAJ,CAAiN,GAAI,SAAWA,GAAQ,MAAOA,GAAKrC,KAAgB,IAAIuC,GAASF,EAAKM,GAAK,OAAeH,UAAXD,EAA+BC,OAAoBD,EAAOjD,KAAK8C,GAApU,GAAIE,GAASnD,OAAOyD,eAAeV,EAAS,IAAe,OAAXI,EAAmB,MAAOE,OAAoBV,GAAKQ,EAAQP,EAAMI,EAAUH,EAAMI,EAAUH,GAAS,IAQtdY,EAAS3E,ESh0BmB,ITk0B5BmC,EAAUlC,EAAuB0E,GAEjCoF,EAA2B/J,ESl0BN,KTo0BrBgK,EAA4B/J,EAAuB8J,GAEnD8B,EAA0B7L,ESr0BN,KTu0BpB8L,EAA2B7L,EAAuB4L,GAElDvG,EAAStF,ESv0BU,KTy0BnBO,EAAYP,ESx0BmB,KT00B/BQ,EAAaP,EAAuBM,GSv0BpBwI,EAAe,SAAAxD,GT40BjC,QS50BkBwD,KT60BhB,GAAIW,GAAQlE,IAEZnE,GAAgBmE,KS/0BAuD,GTi1BhBpF,EAAK1C,OAAOyD,eSj1BIqE,EAAe7H,WAAA,cAAAsE,MAAAiC,MAAAjC,KAAAtC,WTm1B/BsC,KSn0BHqI,YAAc,SAAC5B,GACbA,EAAEC,gBACF,IAAIvG,GAAM+D,EAAKnG,MAAMoC,GACjBA,GAAIvB,SAAWoC,QAIjBQ,QAAQC,IAAI,kCAGZtB,EAAIvB,OAAO0J,YAAYC,KAAKC,WAC1BC,MAAO,uBACL,MAEJjH,QAAQC,IAAI,uBTu3Bf,MA3EAxF,GS10BkBsH,EAAexD,GTs2BjClC,ESt2BkB0F,ITu2BhB/H,IAAK,oBACLc,MS51Bc,WACftB,EAAA,WAASkH,QAAQ,wBT+1BhB1G,IAAK,SACLc,MS30BG,WACJ,MACEK,GAAA,WAAAE,cT20BG,OS30BE6H,UAAU,YACb/H,EAAA,WAAAE,cAAA2H,EAAA,YAAe/D,UAAWT,KAAKjC,MAAM0C,YACrC9D,EAAA,WAAAE,cT60BG,KS70BA6H,UAAU,YAAY5E,EA1CxBuC,QA0CgC,qBACjC1F,EAAA,WAAAE,cTi1BG,KSj1BA6H,UAAU,WACV5E,EA5CFuC,QA4CU,iCACT1F,EAAA,WAAAE,cTm1BG,QSn1BG6H,UAAU,SAAS1E,KAAKjC,MAAM4F,YAEtChH,EAAA,WAAAE,cAAAyJ,EAAA,YAAclE,KAAMtC,EA/CnBuC,QA+C2B,MACd0D,QAAS/F,KAAKqI,oBT01B/B7M,IAAK,YACLc,OSp4BDmE,UAAW9D,EAAA,WAAMiE,UAAU0B,OAAOxB,WAClC6C,UAAWhH,EAAA,WAAMiE,UAAU0B,OAAOxB,WAClCX,IAAKxD,EAAA,WAAMiE,UAAUpC,QTu4BpBjC,YAAY,IAEZf,IAAK,eACLc,OSt4BD6D,IAAKa,QTy4BJzE,YAAY,KSl5BIgH,GTs5BjBpE,ES/5BY0C,UTi6BftH,GAAQ,WSx5BYgJ,ETy5BpBjJ,EAAOC,QAAUA,EAAQ","file":"payment.bundle.min.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar _app = __webpack_require__(267);\n\t\n\t// Common ajax settings.\n\t_jquery2['default'].ajaxSetup({\n\t  dataType: 'json'\n\t});\n\t\n\t_tracking2['default'].init();\n\t(0, _app.init)();\n\n/***/ },\n\n/***/ 267:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\texports.init = init;\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\t__webpack_require__(8);\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(171);\n\t\n\tvar _redux = __webpack_require__(183);\n\t\n\tvar _dataStore = __webpack_require__(195);\n\t\n\tvar _dataStore2 = _interopRequireDefault(_dataStore);\n\t\n\tvar _componentsError = __webpack_require__(256);\n\t\n\tvar _componentsError2 = _interopRequireDefault(_componentsError);\n\t\n\tvar _viewsLogin = __webpack_require__(268);\n\t\n\tvar _viewsLogin2 = _interopRequireDefault(_viewsLogin);\n\t\n\tvar _viewsPurchase = __webpack_require__(269);\n\t\n\tvar _viewsPurchase2 = _interopRequireDefault(_viewsPurchase);\n\t\n\tvar _actionsUser = __webpack_require__(204);\n\t\n\tvar userActions = _interopRequireWildcard(_actionsUser);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar PaymentApp = (function (_Component) {\n\t  _inherits(PaymentApp, _Component);\n\t\n\t  _createClass(PaymentApp, null, [{\n\t    key: 'propTypes',\n\t    value: {\n\t      Login: _react.PropTypes.func.isRequired,\n\t      Purchase: _react.PropTypes.func.isRequired,\n\t      win: _react.PropTypes.object\n\t    },\n\t    enumerable: true\n\t  }, {\n\t    key: 'defaultProps',\n\t    value: {\n\t      Login: _viewsLogin2['default'],\n\t      Purchase: _viewsPurchase2['default'],\n\t      win: window\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  function PaymentApp(props) {\n\t    _classCallCheck(this, PaymentApp);\n\t\n\t    _get(Object.getPrototypeOf(PaymentApp.prototype), 'constructor', this).call(this, props);\n\t    var qs = (0, _utils.parseQuery)(props.win.location.href);\n\t    // TODO: we should validate/clean this input to raise early errors.\n\t    this.state = {\n\t      accessToken: qs.access_token,\n\t      productId: qs.product\n\t    };\n\t  }\n\t\n\t  _createClass(PaymentApp, [{\n\t    key: 'selectData',\n\t    value: function selectData(state) {\n\t      return {\n\t        app: state.app,\n\t        user: state.user\n\t      };\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var state = this.state;\n\t      var Login = this.props.Login;\n\t      var Purchase = this.props.Purchase;\n\t\n\t      return _react2['default'].createElement(\n\t        'main',\n\t        null,\n\t        _react2['default'].createElement(\n\t          _reactRedux.Connector,\n\t          { select: this.selectData },\n\t          function (connector) {\n\t            if (connector.app.error) {\n\t              console.log('rendering app error');\n\t              return _react2['default'].createElement(_componentsError2['default'], { error: connector.app.error });\n\t            } else if (!connector.user.signedIn) {\n\t              console.log('rendering login');\n\t              return _react2['default'].createElement(Login, _extends({\n\t                accessToken: state.accessToken\n\t              }, (0, _redux.bindActionCreators)(userActions, connector.dispatch)));\n\t            } else {\n\t              console.log('rendering purchase flow');\n\t              return _react2['default'].createElement(Purchase, {\n\t                productId: state.productId,\n\t                user: connector.user\n\t              });\n\t            }\n\t          }\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return PaymentApp;\n\t})(_react.Component);\n\t\n\texports['default'] = PaymentApp;\n\t\n\tfunction init() {\n\t  _react2['default'].render(_react2['default'].createElement(\n\t    _reactRedux.Provider,\n\t    { store: _dataStore2['default'] },\n\t    function () {\n\t      return _react2['default'].createElement(PaymentApp, null);\n\t    }\n\t  ), document.body);\n\t}\n\n/***/ },\n\n/***/ 268:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsSpinner = __webpack_require__(254);\n\t\n\tvar _componentsSpinner2 = _interopRequireDefault(_componentsSpinner);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar Login = (function (_Component) {\n\t  _inherits(Login, _Component);\n\t\n\t  function Login() {\n\t    _classCallCheck(this, Login);\n\t\n\t    _get(Object.getPrototypeOf(Login.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(Login, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      _tracking2['default'].setPage('/login');\n\t      this.props.tokenSignIn(this.props.accessToken);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2['default'].createElement(_componentsSpinner2['default'], { text: (0, _utils.gettext)('Signing in') });\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      accessToken: _react.PropTypes.string.isRequired,\n\t      tokenSignIn: _react.PropTypes.func.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return Login;\n\t})(_react.Component);\n\t\n\texports['default'] = Login;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 269:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _redux = __webpack_require__(183);\n\t\n\tvar _reactRedux = __webpack_require__(171);\n\t\n\tvar _actionsPurchase = __webpack_require__(7);\n\t\n\tvar purchaseActions = _interopRequireWildcard(_actionsPurchase);\n\t\n\tvar _actionsUser = __webpack_require__(204);\n\t\n\tvar userActions = _interopRequireWildcard(_actionsUser);\n\t\n\tvar _actionsSubscriptions = __webpack_require__(3);\n\t\n\tvar subscriptionActions = _interopRequireWildcard(_actionsSubscriptions);\n\t\n\tvar _viewsAddSubscription = __webpack_require__(270);\n\t\n\tvar _viewsAddSubscription2 = _interopRequireDefault(_viewsAddSubscription);\n\t\n\tvar _viewsCardListing = __webpack_require__(272);\n\t\n\tvar _viewsCardListing2 = _interopRequireDefault(_viewsCardListing);\n\t\n\tvar _viewsCompletePayment = __webpack_require__(274);\n\t\n\tvar _viewsCompletePayment2 = _interopRequireDefault(_viewsCompletePayment);\n\t\n\tvar _viewsBraintreeToken = __webpack_require__(253);\n\t\n\tvar _viewsBraintreeToken2 = _interopRequireDefault(_viewsBraintreeToken);\n\t\n\tvar Purchase = (function (_Component) {\n\t  _inherits(Purchase, _Component);\n\t\n\t  function Purchase() {\n\t    _classCallCheck(this, Purchase);\n\t\n\t    _get(Object.getPrototypeOf(Purchase.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(Purchase, [{\n\t    key: 'selectData',\n\t    value: function selectData(state) {\n\t      return {\n\t        purchase: state.purchase,\n\t        user: state.user\n\t      };\n\t    }\n\t  }, {\n\t    key: 'renderChild',\n\t    value: function renderChild(result) {\n\t      var props = this.props;\n\t      var BraintreeToken = props.BraintreeToken;\n\t      var CompletePayment = props.CompletePayment;\n\t      var CardListing = props.CardListing;\n\t      var AddSubscription = props.AddSubscription;\n\t\n\t      if (result.purchase.completed) {\n\t        return _react2['default'].createElement(CompletePayment, {\n\t          productId: props.productId,\n\t          userEmail: props.user.email });\n\t      } else if (result.purchase.payMethods && result.purchase.payMethods.length > 0) {\n\t        console.log('rendering card listing');\n\t        return _react2['default'].createElement(CardListing, _extends({\n\t          productId: props.productId,\n\t          payMethods: result.user.payMethods\n\t        }, (0, _redux.bindActionCreators)(purchaseActions, result.dispatch)));\n\t      } else if (!result.user.braintreeToken) {\n\t        console.log('Retreiving Braintree Token');\n\t        return _react2['default'].createElement(BraintreeToken, (0, _redux.bindActionCreators)(userActions, result.dispatch));\n\t      } else {\n\t        console.log('rendering card entry');\n\t\n\t        var _bindActionCreators = (0, _redux.bindActionCreators)(subscriptionActions, result.dispatch);\n\t\n\t        var createSubscription = _bindActionCreators.createSubscription;\n\t\n\t        return _react2['default'].createElement(AddSubscription, {\n\t          cardSubmissionErrors: result.purchase.cardSubmissionErrors,\n\t          braintreeToken: result.user.braintreeToken,\n\t          createSubscription: createSubscription,\n\t          productId: props.productId\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this = this;\n\t\n\t      return _react2['default'].createElement(\n\t        _reactRedux.Connector,\n\t        { select: this.selectData },\n\t        function (result) {\n\t          return _this.renderChild(result);\n\t        }\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      AddSubscription: _react.PropTypes.func.isRequired,\n\t      BraintreeToken: _react.PropTypes.func.isRequired,\n\t      CardListing: _react.PropTypes.func.isRequired,\n\t      CompletePayment: _react.PropTypes.func.isRequired,\n\t      productId: _react.PropTypes.string.isRequired,\n\t      user: _react.PropTypes.object.isRequired\n\t    },\n\t    enumerable: true\n\t  }, {\n\t    key: 'defaultProps',\n\t    value: {\n\t      AddSubscription: _viewsAddSubscription2['default'],\n\t      CardListing: _viewsCardListing2['default'],\n\t      CompletePayment: _viewsCompletePayment2['default'],\n\t      BraintreeToken: _viewsBraintreeToken2['default']\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return Purchase;\n\t})(_react.Component);\n\t\n\texports['default'] = Purchase;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 270:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsCardForm = __webpack_require__(210);\n\t\n\tvar _componentsCardForm2 = _interopRequireDefault(_componentsCardForm);\n\t\n\tvar _componentsProductDetail = __webpack_require__(271);\n\t\n\tvar _componentsProductDetail2 = _interopRequireDefault(_componentsProductDetail);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar AddSubscription = (function (_Component) {\n\t  _inherits(AddSubscription, _Component);\n\t\n\t  function AddSubscription() {\n\t    _classCallCheck(this, AddSubscription);\n\t\n\t    _get(Object.getPrototypeOf(AddSubscription.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(AddSubscription, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      _tracking2['default'].setPage('/add-subscription');\n\t    }\n\t  }, {\n\t    key: 'handleCardSubmit',\n\t    value: function handleCardSubmit(creditCard) {\n\t      console.log('submitting credit card to sign up for subscription', this.props.productId);\n\t      this.props.createSubscription(this.props.braintreeToken, this.props.productId, creditCard);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this = this;\n\t\n\t      return _react2['default'].createElement(\n\t        'div',\n\t        { className: \"card-details\" },\n\t        _react2['default'].createElement(_componentsProductDetail2['default'], { productId: this.props.productId }),\n\t        _react2['default'].createElement(_componentsCardForm2['default'], {\n\t          submissionErrors: this.props.cardSubmissionErrors,\n\t          submitPrompt: (0, _utils.gettext)('Subscribe'),\n\t          handleCardSubmit: function (card) {\n\t            return _this.handleCardSubmit(card);\n\t          },\n\t          id: \"braintree-form\",\n\t          method: \"post\"\n\t        })\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      braintreeToken: _react.PropTypes.string.isRequired,\n\t      cardSubmissionErrors: _react.PropTypes.object,\n\t      createSubscription: _react.PropTypes.func.isRequired,\n\t      productId: _react.PropTypes.string.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return AddSubscription;\n\t})(_react.Component);\n\t\n\texports['default'] = AddSubscription;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 271:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _products = __webpack_require__(261);\n\t\n\tvar products = _interopRequireWildcard(_products);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar ProductDetail = (function (_Component) {\n\t  _inherits(ProductDetail, _Component);\n\t\n\t  function ProductDetail() {\n\t    _classCallCheck(this, ProductDetail);\n\t\n\t    _get(Object.getPrototypeOf(ProductDetail.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(ProductDetail, [{\n\t    key: 'render',\n\t    value: function render() {\n\t\n\t      var productData = products.get(this.props.productId);\n\t\n\t      return _react2['default'].createElement(\n\t        'div',\n\t        { className: \"product\" },\n\t        _react2['default'].createElement(\n\t          'h1',\n\t          { className: \"title\" },\n\t          productData.seller.name.en\n\t        ),\n\t        _react2['default'].createElement(\n\t          'div',\n\t          null,\n\t          productData.description.en\n\t        ),\n\t        _react2['default'].createElement(\n\t          'div',\n\t          { className: \"price\" },\n\t          productData.price.en\n\t        ),\n\t        _react2['default'].createElement(\n\t          'div',\n\t          null,\n\t          (0, _utils.gettext)('per month')\n\t        )\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      productId: _react.PropTypes.string.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return ProductDetail;\n\t})(_react.Component);\n\t\n\texports['default'] = ProductDetail;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 272:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsCardChoice = __webpack_require__(273);\n\t\n\tvar _componentsCardChoice2 = _interopRequireDefault(_componentsCardChoice);\n\t\n\tvar _componentsProductDetail = __webpack_require__(271);\n\t\n\tvar _componentsProductDetail2 = _interopRequireDefault(_componentsProductDetail);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar CardListing = (function (_Component) {\n\t  _inherits(CardListing, _Component);\n\t\n\t  function CardListing() {\n\t    _classCallCheck(this, CardListing);\n\t\n\t    _get(Object.getPrototypeOf(CardListing.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(CardListing, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      _tracking2['default'].setPage('/card-listing');\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2['default'].createElement(\n\t        'div',\n\t        { className: \"card-listing\" },\n\t        _react2['default'].createElement(_componentsProductDetail2['default'], { productId: this.props.productId }),\n\t        _react2['default'].createElement(_componentsCardChoice2['default'], {\n\t          cards: this.props.payMethods,\n\t          productId: this.props.productId\n\t        }),\n\t        _react2['default'].createElement(\n\t          'a',\n\t          { className: \"card-add bottom-link\", href: \"#\",\n\t            onClick: this.props.payWithNewCard },\n\t          (0, _utils.gettext)('Add new credit card')\n\t        )\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      payMethods: _react.PropTypes.array.isRequired,\n\t      payWithNewCard: _react.PropTypes.func.isRequired,\n\t      productId: _react.PropTypes.string.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return CardListing;\n\t})(_react.Component);\n\t\n\texports['default'] = CardListing;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 273:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsCardList = __webpack_require__(265);\n\t\n\tvar _componentsCardList2 = _interopRequireDefault(_componentsCardList);\n\t\n\tvar _componentsSubmitButton = __webpack_require__(251);\n\t\n\tvar _componentsSubmitButton2 = _interopRequireDefault(_componentsSubmitButton);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar _actionsPurchase = __webpack_require__(7);\n\t\n\tvar purchaseActions = _interopRequireWildcard(_actionsPurchase);\n\t\n\tvar _dataStore = __webpack_require__(195);\n\t\n\tvar _dataStore2 = _interopRequireDefault(_dataStore);\n\t\n\tvar CardChoice = (function (_Component) {\n\t  _inherits(CardChoice, _Component);\n\t\n\t  _createClass(CardChoice, null, [{\n\t    key: 'propTypes',\n\t    value: {\n\t      cards: _react.PropTypes.arrayOf(_react.PropTypes.shape({\n\t        id: _react.PropTypes.number,\n\t        resource_uri: _react.PropTypes.string,\n\t        truncated_id: _react.PropTypes.string,\n\t        type_name: _react.PropTypes.string\n\t      })).isRequired,\n\t      productId: _react.PropTypes.string.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  function CardChoice(props) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, CardChoice);\n\t\n\t    _get(Object.getPrototypeOf(CardChoice.prototype), 'constructor', this).call(this, props);\n\t\n\t    this.handleSubmit = function (e) {\n\t      e.preventDefault();\n\t\n\t      _this.setState({ isSubmitting: true });\n\t\n\t      _jquery2['default'].ajax({\n\t        data: {\n\t          pay_method_uri: _this.state.card,\n\t          plan_id: _this.props.productId\n\t        },\n\t        url: '/api/braintree/subscriptions/',\n\t        method: 'post',\n\t        dataType: 'json',\n\t        context: _this\n\t      }).done(function () {\n\t        console.log('Successfully subscribed with existing card');\n\t\n\t        _dataStore2['default'].dispatch(purchaseActions.complete());\n\t      }).fail(function () {\n\t        // TODO: handler errors.\n\t      });\n\t    };\n\t\n\t    this.handleCardChange = function (e) {\n\t      _this.setState({ card: e.target.value });\n\t    };\n\t\n\t    this.state = {\n\t      isSubmitting: false,\n\t      card: this.props.cards.length === 1 ? this.props.cards[0].resource_uri : null\n\t    };\n\t  }\n\t\n\t  _createClass(CardChoice, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var cardData = this.props.cards;\n\t      for (var i = 0; i < cardData.length; i += 1) {\n\t        var card = cardData[i];\n\t        card.checked = this.state.card === card.resource_uri;\n\t      }\n\t\n\t      var formIsValid = this.state.card !== null;\n\t\n\t      return _react2['default'].createElement(\n\t        'form',\n\t        { id: \"card-listing\", onSubmit: this.handleSubmit },\n\t        _react2['default'].createElement(_componentsCardList2['default'], {\n\t          cards: cardData,\n\t          onCardChange: this.handleCardChange }),\n\t        _react2['default'].createElement(_componentsSubmitButton2['default'], { isDisabled: !formIsValid,\n\t          showSpinner: this.state.isSubmitting,\n\t          text: (0, _utils.gettext)('Subscribe')\n\t        })\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return CardChoice;\n\t})(_react.Component);\n\t\n\texports['default'] = CardChoice;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 274:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsProductDetail = __webpack_require__(271);\n\t\n\tvar _componentsProductDetail2 = _interopRequireDefault(_componentsProductDetail);\n\t\n\tvar _componentsSubmitButton = __webpack_require__(251);\n\t\n\tvar _componentsSubmitButton2 = _interopRequireDefault(_componentsSubmitButton);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar CompletePayment = (function (_Component) {\n\t  _inherits(CompletePayment, _Component);\n\t\n\t  function CompletePayment() {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, CompletePayment);\n\t\n\t    _get(Object.getPrototypeOf(CompletePayment.prototype), 'constructor', this).apply(this, arguments);\n\t\n\t    this.handleClick = function (e) {\n\t      e.preventDefault();\n\t      var win = _this.props.win;\n\t      if (win.parent !== window) {\n\t        // Note: the targetOrigin is wide open.\n\t        // Nothing sensitive should be sent whilst\n\t        // that's the case.\n\t        console.log('Telling parent to close modal.');\n\t        // Stringifying the object is necessary for\n\t        // IE9 support.\n\t        win.parent.postMessage(JSON.stringify({\n\t          event: 'purchase-completed'\n\t        }), '*');\n\t      } else {\n\t        console.log('Not iframed. No-op');\n\t      }\n\t    };\n\t  }\n\t\n\t  _createClass(CompletePayment, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      _tracking2['default'].setPage('/complete-payment');\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2['default'].createElement(\n\t        'div',\n\t        { className: \"complete\" },\n\t        _react2['default'].createElement(_componentsProductDetail2['default'], { productId: this.props.productId }),\n\t        _react2['default'].createElement(\n\t          'p',\n\t          { className: \"accepted\" },\n\t          (0, _utils.gettext)('Payment Accepted')\n\t        ),\n\t        _react2['default'].createElement(\n\t          'p',\n\t          { className: \"receipt\" },\n\t          (0, _utils.gettext)('Your receipt has been sent to'),\n\t          _react2['default'].createElement(\n\t            'span',\n\t            { className: \"email\" },\n\t            this.props.userEmail\n\t          )\n\t        ),\n\t        _react2['default'].createElement(_componentsSubmitButton2['default'], { text: (0, _utils.gettext)('OK'),\n\t          onClick: this.handleClick })\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      productId: _react2['default'].PropTypes.string.isRequired,\n\t      userEmail: _react2['default'].PropTypes.string.isRequired,\n\t      win: _react2['default'].PropTypes.object\n\t    },\n\t    enumerable: true\n\t  }, {\n\t    key: 'defaultProps',\n\t    value: {\n\t      win: window\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return CompletePayment;\n\t})(_react.Component);\n\t\n\texports['default'] = CompletePayment;\n\tmodule.exports = exports['default'];\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** payment.bundle.min.js\n **/","import $ from 'jquery';\nimport tracking from 'tracking';\nimport { init as initApp } from './app';\n\n// Common ajax settings.\n$.ajaxSetup({\n  dataType: 'json',\n});\n\ntracking.init();\ninitApp();\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/apps/payment/main.js\n **/","import 'shims';\n\nimport React, { Component, PropTypes } from 'react';\n\nimport { Connector, Provider } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport dataStore from 'data-store';\nimport ErrorMessage from 'components/error';\nimport DefaultLogin from 'views/login';\nimport DefaultPurchase from 'views/purchase';\n\nimport * as userActions from 'actions/user';\nimport { parseQuery } from 'utils';\n\n\nexport default class PaymentApp extends Component {\n\n  static propTypes = {\n    Login: PropTypes.func.isRequired,\n    Purchase: PropTypes.func.isRequired,\n    win: PropTypes.object,\n  }\n\n  static defaultProps = {\n    Login: DefaultLogin,\n    Purchase: DefaultPurchase,\n    win: window,\n  }\n\n  constructor(props) {\n    super(props);\n    var qs = parseQuery(props.win.location.href);\n    // TODO: we should validate/clean this input to raise early errors.\n    this.state = {\n      accessToken: qs.access_token,\n      productId: qs.product,\n    };\n  }\n\n  selectData(state) {\n    return {\n      app: state.app,\n      user: state.user,\n    };\n  }\n\n  render() {\n    var state = this.state;\n    var Login = this.props.Login;\n    var Purchase = this.props.Purchase;\n\n    return (\n      <main>\n        <Connector select={this.selectData}>\n          {connector => {\n            if (connector.app.error) {\n              console.log('rendering app error');\n              return <ErrorMessage error={connector.app.error} />;\n            } else if (!connector.user.signedIn) {\n              console.log('rendering login');\n              return (\n                <Login\n                  accessToken={state.accessToken}\n                  {...bindActionCreators(userActions, connector.dispatch) }\n                />\n              );\n            } else {\n              console.log('rendering purchase flow');\n              return (\n                <Purchase\n                  productId={state.productId}\n                  user={connector.user}\n                />\n              );\n            }\n          }}\n        </Connector>\n      </main>\n    );\n  }\n}\n\n\nexport function init() {\n  React.render((\n    <Provider store={dataStore}>\n      {function() {\n        return <PaymentApp/>;\n      }}\n    </Provider>\n  ), document.body);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/apps/payment/app.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport Spinner from 'components/spinner';\n\nimport { gettext } from 'utils';\nimport tracking from 'tracking';\n\n\nexport default class Login extends Component {\n\n  static propTypes = {\n    accessToken: PropTypes.string.isRequired,\n    tokenSignIn: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    tracking.setPage('/login');\n    this.props.tokenSignIn(this.props.accessToken);\n  }\n\n  render() {\n    return <Spinner text={gettext('Signing in')}/>;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/login.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport { bindActionCreators } from 'redux';\nimport { Connector } from 'react-redux';\n\nimport * as purchaseActions from 'actions/purchase';\nimport * as userActions from 'actions/user';\nimport * as subscriptionActions from 'actions/subscriptions';\n\nimport DefaultAddSubscription from 'views/add-subscription';\nimport DefaultCardListing from 'views/card-listing';\nimport DefaultCompletePayment from 'views/complete-payment';\nimport DefaultBraintreeToken from 'views/braintree-token';\n\n\nexport default class Purchase extends Component {\n\n  static propTypes = {\n    AddSubscription: PropTypes.func.isRequired,\n    BraintreeToken: PropTypes.func.isRequired,\n    CardListing: PropTypes.func.isRequired,\n    CompletePayment: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n    user: PropTypes.object.isRequired,\n  }\n\n  static defaultProps = {\n    AddSubscription: DefaultAddSubscription,\n    CardListing: DefaultCardListing,\n    CompletePayment: DefaultCompletePayment,\n    BraintreeToken: DefaultBraintreeToken,\n  }\n\n  selectData(state) {\n    return {\n      purchase: state.purchase,\n      user: state.user,\n    };\n  }\n\n  renderChild(result) {\n    var props = this.props;\n    var BraintreeToken = props.BraintreeToken;\n    var CompletePayment = props.CompletePayment;\n    var CardListing = props.CardListing;\n    var AddSubscription = props.AddSubscription;\n\n    if (result.purchase.completed) {\n      return (\n        <CompletePayment\n          productId={props.productId}\n          userEmail={props.user.email} />\n      );\n    } else if (result.purchase.payMethods &&\n               result.purchase.payMethods.length > 0) {\n      console.log('rendering card listing');\n      return (\n        <CardListing\n          productId={props.productId}\n          payMethods={result.user.payMethods}\n          {...bindActionCreators(purchaseActions, result.dispatch)}\n        />\n      );\n    } else if (!result.user.braintreeToken) {\n      console.log('Retreiving Braintree Token');\n      return (\n        <BraintreeToken\n          {...bindActionCreators(userActions, result.dispatch) }\n        />\n      );\n    } else {\n      console.log('rendering card entry');\n      var { createSubscription } = bindActionCreators(subscriptionActions,\n                                                      result.dispatch);\n      return (\n        <AddSubscription\n          cardSubmissionErrors={result.purchase.cardSubmissionErrors}\n          braintreeToken={result.user.braintreeToken}\n          createSubscription={createSubscription}\n          productId={props.productId}\n        />\n      );\n    }\n  }\n\n  render () {\n    return (\n      <Connector select={this.selectData}>\n        {(result) => this.renderChild(result)}\n      </Connector>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/purchase.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport CardForm from 'components/card-form';\nimport ProductDetail from 'components/product-detail';\nimport { default as tracking } from 'tracking';\nimport { gettext } from 'utils';\n\n\nexport default class AddSubscription extends Component {\n\n  static propTypes = {\n    braintreeToken: PropTypes.string.isRequired,\n    cardSubmissionErrors: PropTypes.object,\n    createSubscription: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/add-subscription');\n  }\n\n  handleCardSubmit(creditCard) {\n    console.log('submitting credit card to sign up for subscription',\n                this.props.productId);\n    this.props.createSubscription(this.props.braintreeToken,\n                                  this.props.productId,\n                                  creditCard);\n  }\n\n  render() {\n    return (\n      <div className=\"card-details\">\n        <ProductDetail productId={this.props.productId} />\n        <CardForm\n          submissionErrors={this.props.cardSubmissionErrors}\n          submitPrompt={gettext('Subscribe')}\n          handleCardSubmit={(card) => this.handleCardSubmit(card)}\n          id=\"braintree-form\"\n          method=\"post\"\n        />\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/add-subscription.jsx\n **/","import React, { Component, PropTypes } from 'react';\nimport * as products from 'products';\nimport { gettext } from 'utils';\n\nexport default class ProductDetail extends Component {\n\n  static propTypes = {\n    productId: PropTypes.string.isRequired,\n  }\n\n  render() {\n\n    var productData = products.get(this.props.productId);\n\n    return (\n      <div className=\"product\">\n        <h1 className=\"title\">{productData.seller.name.en}</h1>\n        <div>{productData.description.en}</div>\n        <div className=\"price\">{productData.price.en}</div>\n        <div>{gettext('per month')}</div>\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/components/product-detail.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport CardChoice from 'components/card-choice';\nimport ProductDetail from 'components/product-detail';\n\nimport { gettext } from 'utils';\nimport tracking from 'tracking';\n\n\nexport default class CardListing extends Component {\n\n  static propTypes = {\n    payMethods: PropTypes.array.isRequired,\n    payWithNewCard: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/card-listing');\n  }\n\n  render() {\n    return (\n      <div className=\"card-listing\">\n        <ProductDetail productId={this.props.productId} />\n        <CardChoice\n          cards={this.props.payMethods}\n          productId={this.props.productId}\n        />\n        <a className=\"card-add bottom-link\" href=\"#\"\n           onClick={this.props.payWithNewCard}>\n          {gettext('Add new credit card')}\n        </a>\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/card-listing.jsx\n **/","import $ from 'jquery';\nimport React, { Component, PropTypes } from 'react';\n\nimport CardList from 'components/card-list';\nimport SubmitButton from 'components/submit-button';\n\nimport { gettext } from 'utils';\nimport * as purchaseActions from 'actions/purchase';\n\nimport dataStore from 'data-store';\n\n\nexport default class CardChoice extends Component {\n\n  static propTypes = {\n    cards: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number,\n        resource_uri: PropTypes.string,\n        truncated_id: PropTypes.string,\n        type_name: PropTypes.string,\n      }\n    )).isRequired,\n    productId: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false,\n      card: (this.props.cards.length === 1 ?\n             this.props.cards[0].resource_uri : null),\n    };\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.setState({isSubmitting: true});\n\n    $.ajax({\n      data: {\n        pay_method_uri: this.state.card,\n        plan_id: this.props.productId,\n      },\n      url: '/api/braintree/subscriptions/',\n      method: 'post',\n      dataType: 'json',\n      context: this,\n    }).done(function() {\n      console.log('Successfully subscribed with existing card');\n\n      dataStore.dispatch(\n        purchaseActions.complete()\n      );\n\n    }).fail(function() {\n      // TODO: handler errors.\n    });\n  }\n\n  handleCardChange = (e) => {\n    this.setState({card: e.target.value});\n  }\n\n  render() {\n    var cardData = this.props.cards;\n    for (var i = 0; i < cardData.length; i += 1) {\n      var card = cardData[i];\n      card.checked = this.state.card === card.resource_uri;\n    }\n\n    var formIsValid = this.state.card !== null;\n\n    return (\n      <form id=\"card-listing\" onSubmit={this.handleSubmit}>\n        <CardList\n          cards={cardData}\n          onCardChange={this.handleCardChange} />\n        <SubmitButton isDisabled={!formIsValid}\n          showSpinner={this.state.isSubmitting}\n          text={gettext('Subscribe')}\n        />\n      </form>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/components/card-choice.jsx\n **/","import React, { Component } from 'react';\n\nimport ProductDetail from 'components/product-detail';\nimport SubmitButton from 'components/submit-button';\n\nimport { gettext } from 'utils';\nimport { default as tracking } from 'tracking';\n\n\nexport default class CompletePayment extends Component {\n\n  static propTypes = {\n    productId: React.PropTypes.string.isRequired,\n    userEmail: React.PropTypes.string.isRequired,\n    win: React.PropTypes.object,\n  }\n\n  static defaultProps = {\n    win: window,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/complete-payment');\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n    var win = this.props.win;\n    if (win.parent !== window) {\n      // Note: the targetOrigin is wide open.\n      // Nothing sensitive should be sent whilst\n      // that's the case.\n      console.log('Telling parent to close modal.');\n      // Stringifying the object is necessary for\n      // IE9 support.\n      win.parent.postMessage(JSON.stringify({\n        event: 'purchase-completed',\n      }), '*');\n    } else {\n      console.log('Not iframed. No-op');\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"complete\">\n        <ProductDetail productId={this.props.productId} />\n        <p className=\"accepted\">{gettext('Payment Accepted')}</p>\n        <p className=\"receipt\">\n          {gettext('Your receipt has been sent to')}\n          <span className=\"email\">{this.props.userEmail}</span>\n        </p>\n        <SubmitButton text={gettext('OK')}\n                      onClick={this.handleClick} />\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/complete-payment.jsx\n **/"],"sourceRoot":""}