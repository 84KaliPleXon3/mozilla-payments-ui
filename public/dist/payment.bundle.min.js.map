{"version":3,"sources":["webpack:///payment.bundle.min.js","webpack:///./public/js/apps/payment/main.js","webpack:///./public/js/apps/payment/app.jsx","webpack:///./public/js/views/login.jsx","webpack:///./public/js/views/purchase.jsx","webpack:///./public/js/views/add-subscription.jsx","webpack:///./public/js/components/product-detail.jsx","webpack:///./public/js/views/card-listing.jsx","webpack:///./public/js/components/card-choice.jsx","webpack:///./public/js/views/complete-payment.jsx"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_jquery","_jquery2","_tracking","_tracking2","_app","ajaxSetup","dataType","init",267,"_interopRequireWildcard","newObj","key","Object","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","__proto__","_react2","render","createElement","_reactRedux","Provider","store","_dataStore2","PaymentApp","document","body","defineProperty","_extends","assign","target","i","arguments","length","source","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","undefined","Function","getOwnPropertyDescriptor","get","getPrototypeOf","_react","_redux","_dataStore","_componentsError","_componentsError2","_viewsLogin","_viewsLogin2","_viewsPurchase","_viewsPurchase2","_actionsUser","userActions","_utils","_Component","this","qs","parseQuery","win","location","href","state","accessToken","access_token","productId","product","Login","PropTypes","func","isRequired","Purchase","window","app","user","Connector","select","selectData","connector","error","console","log","signedIn","bindActionCreators","dispatch","Component",268,"_componentsSpinner","_componentsSpinner2","apply","setPage","tokenSignIn","text","gettext","string",269,"_actionsTransaction","transactionActions","_actionsSubscriptions","subscriptionActions","_viewsAddSubscription","_viewsAddSubscription2","_viewsCardListing","_viewsCardListing2","_viewsCompletePayment","_viewsCompletePayment2","_viewsBraintreeToken","_viewsBraintreeToken2","transaction","BraintreeToken","CompletePayment","CardListing","AddSubscription","completed","userEmail","email","availablePayMethods","_bindActionCreators","createSubscription","payMethods","braintreeToken","_bindActionCreators2","cardSubmissionErrors","_this","renderChild",270,"_componentsCardForm","_componentsCardForm2","_componentsProductDetail","_componentsProductDetail2","creditCard","className","submissionErrors","submitPrompt","handleCardSubmit","card","id","method",271,"_products","products","ProductDetail","productData","seller","name","en","description","price",272,"_componentsCardChoice","_componentsCardChoice2","cards","onClick","payWithNewCard","array",273,"_componentsCardList","_componentsCardList2","_componentsSubmitButton","_componentsSubmitButton2","CardChoice","handleSubmit","e","preventDefault","setState","isSubmitting","handleCardChange","resource_uri","arrayOf","shape","number","truncated_id","type_name","cardData","checked","formIsValid","onSubmit","onCardChange","isDisabled","showSpinner",274,"handleClick","postMessage","JSON","stringify","event"],"mappings":"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","file":"payment.bundle.min.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _jquery = __webpack_require__(1);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar _app = __webpack_require__(267);\n\t\n\t// Common ajax settings.\n\t_jquery2['default'].ajaxSetup({\n\t  dataType: 'json'\n\t});\n\t\n\t_tracking2['default'].init();\n\t(0, _app.init)();\n\n/***/ },\n\n/***/ 267:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\texports.init = init;\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\t__webpack_require__(8);\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(171);\n\t\n\tvar _redux = __webpack_require__(183);\n\t\n\tvar _dataStore = __webpack_require__(195);\n\t\n\tvar _dataStore2 = _interopRequireDefault(_dataStore);\n\t\n\tvar _componentsError = __webpack_require__(256);\n\t\n\tvar _componentsError2 = _interopRequireDefault(_componentsError);\n\t\n\tvar _viewsLogin = __webpack_require__(268);\n\t\n\tvar _viewsLogin2 = _interopRequireDefault(_viewsLogin);\n\t\n\tvar _viewsPurchase = __webpack_require__(269);\n\t\n\tvar _viewsPurchase2 = _interopRequireDefault(_viewsPurchase);\n\t\n\tvar _actionsUser = __webpack_require__(204);\n\t\n\tvar userActions = _interopRequireWildcard(_actionsUser);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar PaymentApp = (function (_Component) {\n\t  _inherits(PaymentApp, _Component);\n\t\n\t  _createClass(PaymentApp, null, [{\n\t    key: 'propTypes',\n\t    value: {\n\t      Login: _react.PropTypes.func.isRequired,\n\t      Purchase: _react.PropTypes.func.isRequired,\n\t      win: _react.PropTypes.object\n\t    },\n\t    enumerable: true\n\t  }, {\n\t    key: 'defaultProps',\n\t    value: {\n\t      Login: _viewsLogin2['default'],\n\t      Purchase: _viewsPurchase2['default'],\n\t      win: window\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  function PaymentApp(props) {\n\t    _classCallCheck(this, PaymentApp);\n\t\n\t    _get(Object.getPrototypeOf(PaymentApp.prototype), 'constructor', this).call(this, props);\n\t    var qs = (0, _utils.parseQuery)(props.win.location.href);\n\t    // TODO: we should validate/clean this input to raise early errors.\n\t    this.state = {\n\t      accessToken: qs.access_token,\n\t      productId: qs.product\n\t    };\n\t  }\n\t\n\t  _createClass(PaymentApp, [{\n\t    key: 'selectData',\n\t    value: function selectData(state) {\n\t      return {\n\t        app: state.app,\n\t        user: state.user\n\t      };\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var state = this.state;\n\t      var Login = this.props.Login;\n\t      var Purchase = this.props.Purchase;\n\t\n\t      return _react2['default'].createElement(\n\t        'main',\n\t        null,\n\t        _react2['default'].createElement(\n\t          _reactRedux.Connector,\n\t          { select: this.selectData },\n\t          function (connector) {\n\t            if (connector.app.error) {\n\t              console.log('rendering app error');\n\t              return _react2['default'].createElement(_componentsError2['default'], { error: connector.app.error });\n\t            } else if (!connector.user.signedIn) {\n\t              console.log('rendering login');\n\t              return _react2['default'].createElement(Login, _extends({\n\t                accessToken: state.accessToken\n\t              }, (0, _redux.bindActionCreators)(userActions, connector.dispatch)));\n\t            } else {\n\t              console.log('rendering purchase flow');\n\t              return _react2['default'].createElement(Purchase, {\n\t                productId: state.productId,\n\t                user: connector.user\n\t              });\n\t            }\n\t          }\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return PaymentApp;\n\t})(_react.Component);\n\t\n\texports['default'] = PaymentApp;\n\t\n\tfunction init() {\n\t  _react2['default'].render(_react2['default'].createElement(\n\t    _reactRedux.Provider,\n\t    { store: _dataStore2['default'] },\n\t    function () {\n\t      return _react2['default'].createElement(PaymentApp, null);\n\t    }\n\t  ), document.body);\n\t}\n\n/***/ },\n\n/***/ 268:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsSpinner = __webpack_require__(254);\n\t\n\tvar _componentsSpinner2 = _interopRequireDefault(_componentsSpinner);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar Login = (function (_Component) {\n\t  _inherits(Login, _Component);\n\t\n\t  function Login() {\n\t    _classCallCheck(this, Login);\n\t\n\t    _get(Object.getPrototypeOf(Login.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(Login, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      _tracking2['default'].setPage('/login');\n\t      this.props.tokenSignIn(this.props.accessToken);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2['default'].createElement(_componentsSpinner2['default'], { text: (0, _utils.gettext)('Signing in') });\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      accessToken: _react.PropTypes.string.isRequired,\n\t      tokenSignIn: _react.PropTypes.func.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return Login;\n\t})(_react.Component);\n\t\n\texports['default'] = Login;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 269:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _redux = __webpack_require__(183);\n\t\n\tvar _reactRedux = __webpack_require__(171);\n\t\n\tvar _actionsTransaction = __webpack_require__(7);\n\t\n\tvar transactionActions = _interopRequireWildcard(_actionsTransaction);\n\t\n\tvar _actionsUser = __webpack_require__(204);\n\t\n\tvar userActions = _interopRequireWildcard(_actionsUser);\n\t\n\tvar _actionsSubscriptions = __webpack_require__(3);\n\t\n\tvar subscriptionActions = _interopRequireWildcard(_actionsSubscriptions);\n\t\n\tvar _viewsAddSubscription = __webpack_require__(270);\n\t\n\tvar _viewsAddSubscription2 = _interopRequireDefault(_viewsAddSubscription);\n\t\n\tvar _viewsCardListing = __webpack_require__(272);\n\t\n\tvar _viewsCardListing2 = _interopRequireDefault(_viewsCardListing);\n\t\n\tvar _viewsCompletePayment = __webpack_require__(274);\n\t\n\tvar _viewsCompletePayment2 = _interopRequireDefault(_viewsCompletePayment);\n\t\n\tvar _viewsBraintreeToken = __webpack_require__(253);\n\t\n\tvar _viewsBraintreeToken2 = _interopRequireDefault(_viewsBraintreeToken);\n\t\n\tvar Purchase = (function (_Component) {\n\t  _inherits(Purchase, _Component);\n\t\n\t  function Purchase() {\n\t    _classCallCheck(this, Purchase);\n\t\n\t    _get(Object.getPrototypeOf(Purchase.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(Purchase, [{\n\t    key: 'selectData',\n\t    value: function selectData(state) {\n\t      return {\n\t        transaction: state.transaction,\n\t        user: state.user\n\t      };\n\t    }\n\t  }, {\n\t    key: 'renderChild',\n\t    value: function renderChild(connector) {\n\t      var props = this.props;\n\t      var BraintreeToken = props.BraintreeToken;\n\t      var CompletePayment = props.CompletePayment;\n\t      var CardListing = props.CardListing;\n\t      var AddSubscription = props.AddSubscription;\n\t\n\t      if (connector.transaction.completed) {\n\t        return _react2['default'].createElement(CompletePayment, {\n\t          productId: props.productId,\n\t          userEmail: props.user.email });\n\t      } else if (connector.transaction.availablePayMethods.length > 0) {\n\t        console.log('rendering card listing');\n\t\n\t        var _bindActionCreators = (0, _redux.bindActionCreators)(subscriptionActions, connector.dispatch);\n\t\n\t        var createSubscription = _bindActionCreators.createSubscription;\n\t\n\t        return _react2['default'].createElement(CardListing, _extends({\n\t          createSubscription: createSubscription,\n\t          productId: props.productId,\n\t          payMethods: connector.transaction.availablePayMethods\n\t        }, (0, _redux.bindActionCreators)(transactionActions, connector.dispatch)));\n\t      } else if (!connector.user.braintreeToken) {\n\t        console.log('Retreiving Braintree Token');\n\t        return _react2['default'].createElement(BraintreeToken, (0, _redux.bindActionCreators)(userActions, connector.dispatch));\n\t      } else {\n\t        console.log('rendering card entry');\n\t\n\t        var _bindActionCreators2 = (0, _redux.bindActionCreators)(subscriptionActions, connector.dispatch);\n\t\n\t        var createSubscription = _bindActionCreators2.createSubscription;\n\t\n\t        return _react2['default'].createElement(AddSubscription, {\n\t          cardSubmissionErrors: connector.transaction.cardSubmissionErrors,\n\t          braintreeToken: connector.user.braintreeToken,\n\t          createSubscription: createSubscription,\n\t          productId: props.productId\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this = this;\n\t\n\t      return _react2['default'].createElement(\n\t        _reactRedux.Connector,\n\t        { select: this.selectData },\n\t        function (connector) {\n\t          return _this.renderChild(connector);\n\t        }\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      AddSubscription: _react.PropTypes.func.isRequired,\n\t      BraintreeToken: _react.PropTypes.func.isRequired,\n\t      CardListing: _react.PropTypes.func.isRequired,\n\t      CompletePayment: _react.PropTypes.func.isRequired,\n\t      productId: _react.PropTypes.string.isRequired,\n\t      user: _react.PropTypes.object.isRequired\n\t    },\n\t    enumerable: true\n\t  }, {\n\t    key: 'defaultProps',\n\t    value: {\n\t      AddSubscription: _viewsAddSubscription2['default'],\n\t      CardListing: _viewsCardListing2['default'],\n\t      CompletePayment: _viewsCompletePayment2['default'],\n\t      BraintreeToken: _viewsBraintreeToken2['default']\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return Purchase;\n\t})(_react.Component);\n\t\n\texports['default'] = Purchase;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 270:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsCardForm = __webpack_require__(210);\n\t\n\tvar _componentsCardForm2 = _interopRequireDefault(_componentsCardForm);\n\t\n\tvar _componentsProductDetail = __webpack_require__(271);\n\t\n\tvar _componentsProductDetail2 = _interopRequireDefault(_componentsProductDetail);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar AddSubscription = (function (_Component) {\n\t  _inherits(AddSubscription, _Component);\n\t\n\t  function AddSubscription() {\n\t    _classCallCheck(this, AddSubscription);\n\t\n\t    _get(Object.getPrototypeOf(AddSubscription.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(AddSubscription, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      _tracking2['default'].setPage('/add-subscription');\n\t    }\n\t  }, {\n\t    key: 'handleCardSubmit',\n\t    value: function handleCardSubmit(creditCard) {\n\t      console.log('submitting credit card to sign up for subscription', this.props.productId);\n\t      this.props.createSubscription(this.props.productId, creditCard, this.props.braintreeToken);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this = this;\n\t\n\t      return _react2['default'].createElement(\n\t        'div',\n\t        { className: \"card-details\" },\n\t        _react2['default'].createElement(_componentsProductDetail2['default'], { productId: this.props.productId }),\n\t        _react2['default'].createElement(_componentsCardForm2['default'], {\n\t          submissionErrors: this.props.cardSubmissionErrors,\n\t          submitPrompt: (0, _utils.gettext)('Subscribe'),\n\t          handleCardSubmit: function (card) {\n\t            return _this.handleCardSubmit(card);\n\t          },\n\t          id: \"braintree-form\",\n\t          method: \"post\"\n\t        })\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      braintreeToken: _react.PropTypes.string.isRequired,\n\t      cardSubmissionErrors: _react.PropTypes.object,\n\t      createSubscription: _react.PropTypes.func.isRequired,\n\t      productId: _react.PropTypes.string.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return AddSubscription;\n\t})(_react.Component);\n\t\n\texports['default'] = AddSubscription;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 271:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _products = __webpack_require__(261);\n\t\n\tvar products = _interopRequireWildcard(_products);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar ProductDetail = (function (_Component) {\n\t  _inherits(ProductDetail, _Component);\n\t\n\t  function ProductDetail() {\n\t    _classCallCheck(this, ProductDetail);\n\t\n\t    _get(Object.getPrototypeOf(ProductDetail.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(ProductDetail, [{\n\t    key: 'render',\n\t    value: function render() {\n\t\n\t      var productData = products.get(this.props.productId);\n\t\n\t      return _react2['default'].createElement(\n\t        'div',\n\t        { className: \"product\" },\n\t        _react2['default'].createElement(\n\t          'h1',\n\t          { className: \"title\" },\n\t          productData.seller.name.en\n\t        ),\n\t        _react2['default'].createElement(\n\t          'div',\n\t          null,\n\t          productData.description.en\n\t        ),\n\t        _react2['default'].createElement(\n\t          'div',\n\t          { className: \"price\" },\n\t          productData.price.en\n\t        ),\n\t        _react2['default'].createElement(\n\t          'div',\n\t          null,\n\t          (0, _utils.gettext)('per month')\n\t        )\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      productId: _react.PropTypes.string.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return ProductDetail;\n\t})(_react.Component);\n\t\n\texports['default'] = ProductDetail;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 272:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsCardChoice = __webpack_require__(273);\n\t\n\tvar _componentsCardChoice2 = _interopRequireDefault(_componentsCardChoice);\n\t\n\tvar _componentsProductDetail = __webpack_require__(271);\n\t\n\tvar _componentsProductDetail2 = _interopRequireDefault(_componentsProductDetail);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar CardListing = (function (_Component) {\n\t  _inherits(CardListing, _Component);\n\t\n\t  function CardListing() {\n\t    _classCallCheck(this, CardListing);\n\t\n\t    _get(Object.getPrototypeOf(CardListing.prototype), 'constructor', this).apply(this, arguments);\n\t  }\n\t\n\t  _createClass(CardListing, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      _tracking2['default'].setPage('/card-listing');\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2['default'].createElement(\n\t        'div',\n\t        { className: \"card-listing\" },\n\t        _react2['default'].createElement(_componentsProductDetail2['default'], { productId: this.props.productId }),\n\t        _react2['default'].createElement(_componentsCardChoice2['default'], {\n\t          createSubscription: this.props.createSubscription,\n\t          cards: this.props.payMethods,\n\t          productId: this.props.productId\n\t        }),\n\t        _react2['default'].createElement(\n\t          'a',\n\t          { className: \"card-add bottom-link\", href: \"#\",\n\t            onClick: this.props.payWithNewCard },\n\t          (0, _utils.gettext)('Add new credit card')\n\t        )\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      createSubscription: _react.PropTypes.func.isRequired,\n\t      payMethods: _react.PropTypes.array.isRequired,\n\t      payWithNewCard: _react.PropTypes.func.isRequired,\n\t      productId: _react.PropTypes.string.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return CardListing;\n\t})(_react.Component);\n\t\n\texports['default'] = CardListing;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 273:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsCardList = __webpack_require__(265);\n\t\n\tvar _componentsCardList2 = _interopRequireDefault(_componentsCardList);\n\t\n\tvar _componentsSubmitButton = __webpack_require__(251);\n\t\n\tvar _componentsSubmitButton2 = _interopRequireDefault(_componentsSubmitButton);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar CardChoice = (function (_Component) {\n\t  _inherits(CardChoice, _Component);\n\t\n\t  _createClass(CardChoice, null, [{\n\t    key: 'propTypes',\n\t    value: {\n\t      cards: _react.PropTypes.arrayOf(_react.PropTypes.shape({\n\t        id: _react.PropTypes.number,\n\t        resource_uri: _react.PropTypes.string,\n\t        truncated_id: _react.PropTypes.string,\n\t        type_name: _react.PropTypes.string\n\t      })).isRequired,\n\t      createSubscription: _react.PropTypes.func.isRequired,\n\t      productId: _react.PropTypes.string.isRequired\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  function CardChoice(props) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, CardChoice);\n\t\n\t    _get(Object.getPrototypeOf(CardChoice.prototype), 'constructor', this).call(this, props);\n\t\n\t    this.handleSubmit = function (e) {\n\t      e.preventDefault();\n\t      _this.setState({ isSubmitting: true });\n\t      _this.props.createSubscription(_this.props.productId, _this.state.card);\n\t    };\n\t\n\t    this.handleCardChange = function (e) {\n\t      _this.setState({ card: e.target.value });\n\t    };\n\t\n\t    this.state = {\n\t      isSubmitting: false,\n\t      card: this.props.cards.length === 1 ? this.props.cards[0].resource_uri : null\n\t    };\n\t  }\n\t\n\t  _createClass(CardChoice, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var cardData = this.props.cards;\n\t      for (var i = 0; i < cardData.length; i += 1) {\n\t        var card = cardData[i];\n\t        card.checked = this.state.card === card.resource_uri;\n\t      }\n\t\n\t      var formIsValid = this.state.card !== null;\n\t\n\t      return _react2['default'].createElement(\n\t        'form',\n\t        { id: \"card-listing\", onSubmit: this.handleSubmit },\n\t        _react2['default'].createElement(_componentsCardList2['default'], {\n\t          cards: cardData,\n\t          onCardChange: this.handleCardChange }),\n\t        _react2['default'].createElement(_componentsSubmitButton2['default'], { isDisabled: !formIsValid,\n\t          showSpinner: this.state.isSubmitting,\n\t          text: (0, _utils.gettext)('Subscribe')\n\t        })\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return CardChoice;\n\t})(_react.Component);\n\t\n\texports['default'] = CardChoice;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 274:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(15);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _componentsProductDetail = __webpack_require__(271);\n\t\n\tvar _componentsProductDetail2 = _interopRequireDefault(_componentsProductDetail);\n\t\n\tvar _componentsSubmitButton = __webpack_require__(251);\n\t\n\tvar _componentsSubmitButton2 = _interopRequireDefault(_componentsSubmitButton);\n\t\n\tvar _utils = __webpack_require__(206);\n\t\n\tvar _tracking = __webpack_require__(252);\n\t\n\tvar _tracking2 = _interopRequireDefault(_tracking);\n\t\n\tvar CompletePayment = (function (_Component) {\n\t  _inherits(CompletePayment, _Component);\n\t\n\t  function CompletePayment() {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, CompletePayment);\n\t\n\t    _get(Object.getPrototypeOf(CompletePayment.prototype), 'constructor', this).apply(this, arguments);\n\t\n\t    this.handleClick = function (e) {\n\t      e.preventDefault();\n\t      var win = _this.props.win;\n\t      if (win.parent !== window) {\n\t        // Note: the targetOrigin is wide open.\n\t        // Nothing sensitive should be sent whilst\n\t        // that's the case.\n\t        console.log('Telling parent to close modal.');\n\t        // Stringifying the object is necessary for\n\t        // IE9 support.\n\t        win.parent.postMessage(JSON.stringify({\n\t          event: 'purchase-completed'\n\t        }), '*');\n\t      } else {\n\t        console.log('Not iframed. No-op');\n\t      }\n\t    };\n\t  }\n\t\n\t  _createClass(CompletePayment, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      _tracking2['default'].setPage('/complete-payment');\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2['default'].createElement(\n\t        'div',\n\t        { className: \"complete\" },\n\t        _react2['default'].createElement(_componentsProductDetail2['default'], { productId: this.props.productId }),\n\t        _react2['default'].createElement(\n\t          'p',\n\t          { className: \"accepted\" },\n\t          (0, _utils.gettext)('Payment Accepted')\n\t        ),\n\t        _react2['default'].createElement(\n\t          'p',\n\t          { className: \"receipt\" },\n\t          (0, _utils.gettext)('Your receipt has been sent to'),\n\t          _react2['default'].createElement(\n\t            'span',\n\t            { className: \"email\" },\n\t            this.props.userEmail\n\t          )\n\t        ),\n\t        _react2['default'].createElement(_componentsSubmitButton2['default'], { text: (0, _utils.gettext)('OK'),\n\t          onClick: this.handleClick })\n\t      );\n\t    }\n\t  }], [{\n\t    key: 'propTypes',\n\t    value: {\n\t      productId: _react2['default'].PropTypes.string.isRequired,\n\t      userEmail: _react2['default'].PropTypes.string.isRequired,\n\t      win: _react2['default'].PropTypes.object\n\t    },\n\t    enumerable: true\n\t  }, {\n\t    key: 'defaultProps',\n\t    value: {\n\t      win: window\n\t    },\n\t    enumerable: true\n\t  }]);\n\t\n\t  return CompletePayment;\n\t})(_react.Component);\n\t\n\texports['default'] = CompletePayment;\n\tmodule.exports = exports['default'];\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** payment.bundle.min.js\n **/","import $ from 'jquery';\nimport tracking from 'tracking';\nimport { init as initApp } from './app';\n\n// Common ajax settings.\n$.ajaxSetup({\n  dataType: 'json',\n});\n\ntracking.init();\ninitApp();\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/apps/payment/main.js\n **/","import 'shims';\n\nimport React, { Component, PropTypes } from 'react';\n\nimport { Connector, Provider } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport dataStore from 'data-store';\nimport ErrorMessage from 'components/error';\nimport DefaultLogin from 'views/login';\nimport DefaultPurchase from 'views/purchase';\n\nimport * as userActions from 'actions/user';\nimport { parseQuery } from 'utils';\n\n\nexport default class PaymentApp extends Component {\n\n  static propTypes = {\n    Login: PropTypes.func.isRequired,\n    Purchase: PropTypes.func.isRequired,\n    win: PropTypes.object,\n  }\n\n  static defaultProps = {\n    Login: DefaultLogin,\n    Purchase: DefaultPurchase,\n    win: window,\n  }\n\n  constructor(props) {\n    super(props);\n    var qs = parseQuery(props.win.location.href);\n    // TODO: we should validate/clean this input to raise early errors.\n    this.state = {\n      accessToken: qs.access_token,\n      productId: qs.product,\n    };\n  }\n\n  selectData(state) {\n    return {\n      app: state.app,\n      user: state.user,\n    };\n  }\n\n  render() {\n    var state = this.state;\n    var Login = this.props.Login;\n    var Purchase = this.props.Purchase;\n\n    return (\n      <main>\n        <Connector select={this.selectData}>\n          {connector => {\n            if (connector.app.error) {\n              console.log('rendering app error');\n              return <ErrorMessage error={connector.app.error} />;\n            } else if (!connector.user.signedIn) {\n              console.log('rendering login');\n              return (\n                <Login\n                  accessToken={state.accessToken}\n                  {...bindActionCreators(userActions, connector.dispatch) }\n                />\n              );\n            } else {\n              console.log('rendering purchase flow');\n              return (\n                <Purchase\n                  productId={state.productId}\n                  user={connector.user}\n                />\n              );\n            }\n          }}\n        </Connector>\n      </main>\n    );\n  }\n}\n\n\nexport function init() {\n  React.render((\n    <Provider store={dataStore}>\n      {function() {\n        return <PaymentApp/>;\n      }}\n    </Provider>\n  ), document.body);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/apps/payment/app.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport Spinner from 'components/spinner';\n\nimport { gettext } from 'utils';\nimport tracking from 'tracking';\n\n\nexport default class Login extends Component {\n\n  static propTypes = {\n    accessToken: PropTypes.string.isRequired,\n    tokenSignIn: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    tracking.setPage('/login');\n    this.props.tokenSignIn(this.props.accessToken);\n  }\n\n  render() {\n    return <Spinner text={gettext('Signing in')}/>;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/login.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport { bindActionCreators } from 'redux';\nimport { Connector } from 'react-redux';\n\nimport * as transactionActions from 'actions/transaction';\nimport * as userActions from 'actions/user';\nimport * as subscriptionActions from 'actions/subscriptions';\n\nimport DefaultAddSubscription from 'views/add-subscription';\nimport DefaultCardListing from 'views/card-listing';\nimport DefaultCompletePayment from 'views/complete-payment';\nimport DefaultBraintreeToken from 'views/braintree-token';\n\n\nexport default class Purchase extends Component {\n\n  static propTypes = {\n    AddSubscription: PropTypes.func.isRequired,\n    BraintreeToken: PropTypes.func.isRequired,\n    CardListing: PropTypes.func.isRequired,\n    CompletePayment: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n    user: PropTypes.object.isRequired,\n  }\n\n  static defaultProps = {\n    AddSubscription: DefaultAddSubscription,\n    CardListing: DefaultCardListing,\n    CompletePayment: DefaultCompletePayment,\n    BraintreeToken: DefaultBraintreeToken,\n  }\n\n  selectData(state) {\n    return {\n      transaction: state.transaction,\n      user: state.user,\n    };\n  }\n\n  renderChild(connector) {\n    var props = this.props;\n    var BraintreeToken = props.BraintreeToken;\n    var CompletePayment = props.CompletePayment;\n    var CardListing = props.CardListing;\n    var AddSubscription = props.AddSubscription;\n\n    if (connector.transaction.completed) {\n      return (\n        <CompletePayment\n          productId={props.productId}\n          userEmail={props.user.email} />\n      );\n    } else if (connector.transaction.availablePayMethods.length > 0) {\n      console.log('rendering card listing');\n      var { createSubscription } = bindActionCreators(subscriptionActions,\n                                                      connector.dispatch);\n      return (\n        <CardListing\n          createSubscription={createSubscription}\n          productId={props.productId}\n          payMethods={connector.transaction.availablePayMethods}\n          {...bindActionCreators(transactionActions, connector.dispatch)}\n        />\n      );\n    } else if (!connector.user.braintreeToken) {\n      console.log('Retreiving Braintree Token');\n      return (\n        <BraintreeToken\n          {...bindActionCreators(userActions, connector.dispatch) }\n        />\n      );\n    } else {\n      console.log('rendering card entry');\n      var { createSubscription } = bindActionCreators(subscriptionActions,\n                                                      connector.dispatch);\n      return (\n        <AddSubscription\n          cardSubmissionErrors={connector.transaction.cardSubmissionErrors}\n          braintreeToken={connector.user.braintreeToken}\n          createSubscription={createSubscription}\n          productId={props.productId}\n        />\n      );\n    }\n  }\n\n  render () {\n    return (\n      <Connector select={this.selectData}>\n        {(connector) => this.renderChild(connector)}\n      </Connector>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/purchase.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport CardForm from 'components/card-form';\nimport ProductDetail from 'components/product-detail';\nimport { default as tracking } from 'tracking';\nimport { gettext } from 'utils';\n\n\nexport default class AddSubscription extends Component {\n\n  static propTypes = {\n    braintreeToken: PropTypes.string.isRequired,\n    cardSubmissionErrors: PropTypes.object,\n    createSubscription: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/add-subscription');\n  }\n\n  handleCardSubmit(creditCard) {\n    console.log('submitting credit card to sign up for subscription',\n                this.props.productId);\n    this.props.createSubscription(this.props.productId,\n                                  creditCard,\n                                  this.props.braintreeToken);\n  }\n\n  render() {\n    return (\n      <div className=\"card-details\">\n        <ProductDetail productId={this.props.productId} />\n        <CardForm\n          submissionErrors={this.props.cardSubmissionErrors}\n          submitPrompt={gettext('Subscribe')}\n          handleCardSubmit={(card) => this.handleCardSubmit(card)}\n          id=\"braintree-form\"\n          method=\"post\"\n        />\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/add-subscription.jsx\n **/","import React, { Component, PropTypes } from 'react';\nimport * as products from 'products';\nimport { gettext } from 'utils';\n\nexport default class ProductDetail extends Component {\n\n  static propTypes = {\n    productId: PropTypes.string.isRequired,\n  }\n\n  render() {\n\n    var productData = products.get(this.props.productId);\n\n    return (\n      <div className=\"product\">\n        <h1 className=\"title\">{productData.seller.name.en}</h1>\n        <div>{productData.description.en}</div>\n        <div className=\"price\">{productData.price.en}</div>\n        <div>{gettext('per month')}</div>\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/components/product-detail.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport CardChoice from 'components/card-choice';\nimport ProductDetail from 'components/product-detail';\n\nimport { gettext } from 'utils';\nimport tracking from 'tracking';\n\n\nexport default class CardListing extends Component {\n\n  static propTypes = {\n    createSubscription: PropTypes.func.isRequired,\n    payMethods: PropTypes.array.isRequired,\n    payWithNewCard: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/card-listing');\n  }\n\n  render() {\n    return (\n      <div className=\"card-listing\">\n        <ProductDetail productId={this.props.productId} />\n        <CardChoice\n          createSubscription={this.props.createSubscription}\n          cards={this.props.payMethods}\n          productId={this.props.productId}\n        />\n        <a className=\"card-add bottom-link\" href=\"#\"\n           onClick={this.props.payWithNewCard}>\n          {gettext('Add new credit card')}\n        </a>\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/card-listing.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport CardList from 'components/card-list';\nimport SubmitButton from 'components/submit-button';\n\nimport { gettext } from 'utils';\n\n\nexport default class CardChoice extends Component {\n\n  static propTypes = {\n    cards: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number,\n        resource_uri: PropTypes.string,\n        truncated_id: PropTypes.string,\n        type_name: PropTypes.string,\n      }\n    )).isRequired,\n    createSubscription: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false,\n      card: (this.props.cards.length === 1 ?\n             this.props.cards[0].resource_uri : null),\n    };\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.setState({isSubmitting: true});\n    this.props.createSubscription(this.props.productId, this.state.card);\n  }\n\n  handleCardChange = (e) => {\n    this.setState({card: e.target.value});\n  }\n\n  render() {\n    var cardData = this.props.cards;\n    for (var i = 0; i < cardData.length; i += 1) {\n      var card = cardData[i];\n      card.checked = this.state.card === card.resource_uri;\n    }\n\n    var formIsValid = this.state.card !== null;\n\n    return (\n      <form id=\"card-listing\" onSubmit={this.handleSubmit}>\n        <CardList\n          cards={cardData}\n          onCardChange={this.handleCardChange} />\n        <SubmitButton isDisabled={!formIsValid}\n          showSpinner={this.state.isSubmitting}\n          text={gettext('Subscribe')}\n        />\n      </form>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/components/card-choice.jsx\n **/","import React, { Component } from 'react';\n\nimport ProductDetail from 'components/product-detail';\nimport SubmitButton from 'components/submit-button';\n\nimport { gettext } from 'utils';\nimport { default as tracking } from 'tracking';\n\n\nexport default class CompletePayment extends Component {\n\n  static propTypes = {\n    productId: React.PropTypes.string.isRequired,\n    userEmail: React.PropTypes.string.isRequired,\n    win: React.PropTypes.object,\n  }\n\n  static defaultProps = {\n    win: window,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/complete-payment');\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n    var win = this.props.win;\n    if (win.parent !== window) {\n      // Note: the targetOrigin is wide open.\n      // Nothing sensitive should be sent whilst\n      // that's the case.\n      console.log('Telling parent to close modal.');\n      // Stringifying the object is necessary for\n      // IE9 support.\n      win.parent.postMessage(JSON.stringify({\n        event: 'purchase-completed',\n      }), '*');\n    } else {\n      console.log('Not iframed. No-op');\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"complete\">\n        <ProductDetail productId={this.props.productId} />\n        <p className=\"accepted\">{gettext('Payment Accepted')}</p>\n        <p className=\"receipt\">\n          {gettext('Your receipt has been sent to')}\n          <span className=\"email\">{this.props.userEmail}</span>\n        </p>\n        <SubmitButton text={gettext('OK')}\n                      onClick={this.handleClick} />\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/complete-payment.jsx\n **/"],"sourceRoot":""}