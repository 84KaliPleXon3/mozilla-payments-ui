webpackJsonp([0],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),a=r(o),u=n(2);a["default"].ajaxSetup({dataType:"json"}),u.init()},2:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function l(){f["default"].render(f["default"].createElement(d.Provider,{redux:m["default"]},function(){return f["default"].createElement(M,null)}),document.body)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}};t.init=l,n(3);var p=n(10),f=o(p),d=n(166),v=n(179),y=n(189),m=o(y),h=n(196),g=r(h),b=n(197),O=r(b),P=n(200),E=n(201),_=o(E),w=n(205),j=o(w),T=n(207),C=o(T),M=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return u(t,e),c(t,[{key:"selectData",value:function(e){return{management:e.management,user:e.user}}},{key:"renderChild",value:function(e){var t=P.parseQuery(this.props.window.location.href),n=t.access_token,r=v.bindActionCreators(g,e.dispatch),o=v.bindActionCreators(O,e.dispatch),a=[],u=this.props.Management,l=this.props.ManageCards;return e.management.error?a.push(f["default"].createElement(_["default"],i({},r,{error:e.management.error}))):e.management.paymentMethods&&a.push(f["default"].createElement(l,i({},r,{paymentMethods:e.management.paymentMethods}))),a.push(f["default"].createElement(u,i({},r,o,{accessToken:n,user:e.user}))),f["default"].createElement("div",null,a)}},{key:"render",value:function(){var e=this;return f["default"].createElement("main",null,f["default"].createElement(d.Connector,{select:this.selectData},function(t){return e.renderChild(t)}))}}],[{key:"propTypes",value:{ManageCards:p.PropTypes.element,Management:p.PropTypes.element,window:p.PropTypes.object},enumerable:!0},{key:"defaultProps",value:{ManageCards:C["default"],Management:j["default"],window:window},enumerable:!0}]),t}(p.Component);t["default"]=M},196:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){return{type:p.APP_ERROR,error:{debugMessage:e}}}function u(){return function(e){c["default"].ajax({method:"get",url:"/api/braintree/mozilla/paymethod/",context:this}).then(function(t){e({type:p.GET_PAY_METHODS,management:{paymentMethods:t}})}).fail(function(){console.log("Retrieving cards failed"),e(a("Retrieving cards failed"))})}}function l(){return console.log("closeModal"),{type:p.CLOSE_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.error=a,t.getPayMethods=u,t.closeModal=l;var i=n(1),c=o(i),s=n(192),p=r(s)},201:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(10),c=r(i),s=n(202),p=r(s),f=n(204),d=r(f),v=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement(p["default"],{handleClose:this.props.closeModal},c["default"].createElement(d["default"],{error:this.props.error}))}}],[{key:"propTypes",value:{closeModal:i.PropTypes.func.isRequired,error:i.PropTypes.object.isRequired},enumerable:!0}]),t}(i.Component);t["default"]=v,e.exports=t["default"]},202:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(10),c=r(i),s=n(200),p=n(203),f=r(p),d=function(e){function t(){var e=this;o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.onClose=function(t){var n=t.target.getAttribute("class")||"",r=n.split(" ");r.length>0&&(r.indexOf("modal")>-1||r.indexOf("close")>-1)&&(t.preventDefault(),t.stopPropagation(),e.props.handleClose())}}return a(t,e),u(t,[{key:"render",value:function(){var e=f["default"](["modal",{active:!0}]);return c["default"].createElement("div",{className:e,onClick:this.onClose},c["default"].createElement("div",{className:"inner"},c["default"].createElement("header",null,this.props.title?c["default"].createElement("h2",null,this.props.title):null,c["default"].createElement("a",{href:"#",onClick:this.onClose,className:"close"},c["default"].createElement("span",{className:"vh"},s.gettext("Close")))),c["default"].createElement("div",{className:"content"},this.props.children)))}}],[{key:"propTypes",value:{children:i.PropTypes.object.isRequired,handleClose:i.PropTypes.func.isRequired,title:i.PropTypes.string},enumerable:!0}]),t}(i.Component);t["default"]=d,e.exports=t["default"]},205:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(10),c=r(i),s=n(206),p=n(200),f=function(e){function t(){var e=this;o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.userSignIn=function(t){t.preventDefault(),e.props.userSignIn()},this.userSignOut=function(t){t.preventDefault(),e.props.userSignOut()}}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.accessToken&&(console.log("page loaded with access token; signing in"),this.props.tokenSignIn(this.props.accessToken))}},{key:"render",value:function(){var e,t,n;return this.props.user.signedIn?(n=p.gettext("Sign Out"),t=this.userSignOut,e="Hello, "+this.props.user.email):(n=p.gettext("Sign In"),t=this.userSignIn,e=p.gettext("Not signed in")),c["default"].createElement("div",null,c["default"].createElement("header",{className:"top-nav"},c["default"].createElement("h1",{className:"logo"},"Firefox Payments"),c["default"].createElement("button",{id:"sign-in-toggle",onClick:t},n)),c["default"].createElement("div",{className:"content"},c["default"].createElement("div",{className:"user"},c["default"].createElement("p",null,e)),c["default"].createElement(s.Accordion,null,c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,p.gettext("Payment Accounts")),c["default"].createElement("button",{onClick:this.props.getPayMethods},p.gettext("Change")))),c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,p.gettext("Receipts and Subscriptions")),c["default"].createElement("button",{"data-activate":!0},p.gettext("View/Change"))),c["default"].createElement(s.AccordionContent,null,c["default"].createElement("p",null,"Placeholder"))),c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,p.gettext("Email Address and Password")),c["default"].createElement("a",{className:"button",href:"https://mozilla.org/",target:"_blank"},p.gettext("Change")),this.props.user?c["default"].createElement("p",null,this.props.user.email):null)),c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,p.gettext("Delete Account")),c["default"].createElement("button",{"data-activate":!0},p.gettext("Delete"))),c["default"].createElement(s.AccordionContent,null,c["default"].createElement("p",null,"Placeholder content"))))))}}],[{key:"propTypes",value:{accessToken:i.PropTypes.string,getPayMethods:i.PropTypes.func.isRequired,tokenSignIn:i.PropTypes.func.isRequired,user:i.PropTypes.object.isRequired,userSignIn:i.PropTypes.func.isRequired,userSignOut:i.PropTypes.func.isRequired},enumerable:!0}]),t}(i.Component);t["default"]=f,e.exports=t["default"]},206:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(10),c=r(i),s=n(203),p=r(s),f=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=[];c["default"].Children.forEach(this.props.children,function(){n.push({isActive:!1})}),n[0].isActive=!0,this.state={sections:n}}return a(t,e),u(t,null,[{key:"propTypes",value:{children:i.PropTypes.node.isRequired},enumerable:!0}]),u(t,[{key:"activate",value:function(e,t){if(null!==t.target.getAttribute("data-activate")){t.preventDefault();var n=this.state.sections;n.forEach(function(t,n){t.isActive=e===n}),this.setState({sections:n})}}},{key:"render",value:function(){var e=this,t=c["default"].Children.map(this.props.children,function(t,n){return c["default"].cloneElement(t,{activate:e.activate.bind(e,n),isActive:e.state.sections[n].isActive})});return c["default"].createElement("div",{className:"accordion",ref:"accordion"},t)}}]),t}(i.Component);t.Accordion=f;var d=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){var e=p["default"]("ac-section",{active:this.props.isActive});return c["default"].createElement("section",{onClick:this.props.activate,className:e},this.props.children)}}],[{key:"propTypes",value:{activate:c["default"].PropTypes.func.isRequired,children:c["default"].PropTypes.node.isRequired,isActive:c["default"].PropTypes.bool},enumerable:!0}]),t}(i.Component);t.AccordionSection=d;var v=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:"ac-content"},this.props.children)}}],[{key:"propTypes",value:{children:c["default"].PropTypes.node.isRequired},enumerable:!0}]),t}(i.Component);t.AccordionContent=v},207:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(10),c=r(i),s=n(202),p=r(s),f=n(208),d=r(f),v=n(200),y=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement(p["default"],{handleClose:this.props.closeModal,title:v.gettext("Payment Methods")},c["default"].createElement(d["default"],{cards:this.props.paymentMethods}))}}],[{key:"propTypes",value:{closeModal:i.PropTypes.func.isRequired,paymentMethods:i.PropTypes.array.isRequired},enumerable:!0}]),t}(i.Component);t["default"]=y,e.exports=t["default"]}});
//# sourceMappingURL=management.bundle.min.js.map