webpackJsonp([0],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),a=r(o),u=n(2);a["default"].ajaxSetup({dataType:"json"}),u.init()},2:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function l(){f["default"].render(f["default"].createElement(d.Provider,{store:m["default"]},function(){return f["default"].createElement(x,null)}),document.body)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}};t.init=l,n(7);var p=n(14),f=o(p),d=n(170),v=n(182),y=n(194),m=o(y),h=n(201),b=r(h),g=n(3),E=r(g),O=n(202),P=r(O),_=n(205),w=n(206),j=o(w),T=n(210),k=o(T),C=n(218),M=o(C),x=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return u(t,e),c(t,[{key:"selectData",value:function(e){return{management:e.management,user:e.user}}},{key:"renderChild",value:function(e){var t=_.parseQuery(this.props.window.location.href),n=t.access_token,r=v.bindActionCreators(b,e.dispatch),o=v.bindActionCreators(E,e.dispatch),a=v.bindActionCreators(P,e.dispatch),u=[],l=this.props.Management,c=this.props.PayMethods;return e.management.error?u.push(f["default"].createElement(j["default"],i({},r,{error:e.management.error}))):e.management.paymentMethods&&u.push(f["default"].createElement(c,i({},r,{paymentMethods:e.management.paymentMethods}))),u.push(f["default"].createElement(l,i({},r,o,a,{userSubscriptions:e.user.subscriptions,accessToken:n,user:e.user}))),f["default"].createElement("div",null,u)}},{key:"render",value:function(){var e=this;return f["default"].createElement("main",null,f["default"].createElement(d.Connector,{select:this.selectData},function(t){return e.renderChild(t)}))}}],[{key:"propTypes",value:{Management:p.PropTypes.func.isRequired,PayMethods:p.PropTypes.func.isRequired,window:p.PropTypes.object.isRequired},enumerable:!0},{key:"defaultProps",value:{Management:k["default"],PayMethods:M["default"],window:window},enumerable:!0}]),t}(p.Component);t["default"]=x},201:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){return{type:p.APP_ERROR,error:{debugMessage:e}}}function u(){return function(e){c["default"].ajax({method:"get",url:"/api/braintree/mozilla/paymethod/",context:this}).then(function(t){e({type:p.GET_PAY_METHODS,management:{paymentMethods:t}})}).fail(function(){console.log("Retrieving cards failed"),e(a("Retrieving cards failed"))})}}function l(){return console.log("closeModal"),{type:p.CLOSE_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.error=a,t.getPayMethods=u,t.closeModal=l;var i=n(1),c=o(i),s=n(4),p=r(s)},206:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(14),c=r(i),s=n(207),p=r(s),f=n(209),d=r(f),v=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement(p["default"],{handleClose:this.props.closeModal},c["default"].createElement(d["default"],{error:this.props.error}))}}],[{key:"propTypes",value:{closeModal:i.PropTypes.func.isRequired,error:i.PropTypes.object.isRequired},enumerable:!0}]),t}(i.Component);t["default"]=v,e.exports=t["default"]},207:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(14),c=r(i),s=n(205),p=n(208),f=r(p),d=function(e){function t(){var e=this;o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.onClose=function(t){var n=t.target.getAttribute("class")||"",r=n.split(" ");r.length>0&&(r.indexOf("modal")>-1||r.indexOf("close")>-1)&&(t.preventDefault(),t.stopPropagation(),e.props.handleClose())}}return a(t,e),u(t,[{key:"render",value:function(){var e=f["default"](["modal",{active:!0}]);return c["default"].createElement("div",{className:e,onClick:this.onClose},c["default"].createElement("div",{className:"inner"},c["default"].createElement("header",null,this.props.title?c["default"].createElement("h2",null,this.props.title):null,c["default"].createElement("a",{href:"#",onClick:this.onClose,className:"close"},c["default"].createElement("span",{className:"vh"},s.gettext("Close")))),c["default"].createElement("div",{className:"content"},this.props.children)))}}],[{key:"propTypes",value:{children:i.PropTypes.object.isRequired,handleClose:i.PropTypes.func.isRequired,title:i.PropTypes.string},enumerable:!0}]),t}(i.Component);t["default"]=d,e.exports=t["default"]},210:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(14),c=r(i),s=n(211),p=n(212),f=r(p),d=n(205),v=function(e){function t(){var e=this;o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.showSubscriptions=function(t){t.preventDefault(),e.props.getUserSubscriptions()},this.userSignIn=function(t){t.preventDefault(),e.props.userSignIn()},this.userSignOut=function(t){t.preventDefault(),e.props.userSignOut()}}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.accessToken&&(console.log("page loaded with access token; signing in"),this.props.tokenSignIn(this.props.accessToken))}},{key:"render",value:function(){var e,t,n;return this.props.user.signedIn?(n=d.gettext("Sign Out"),t=this.userSignOut,e="Hello, "+this.props.user.email):(n=d.gettext("Sign In"),t=this.userSignIn,e=d.gettext("Not signed in")),c["default"].createElement("div",null,c["default"].createElement("header",{className:"top-nav"},c["default"].createElement("h1",{className:"logo"},"Firefox Payments"),c["default"].createElement("button",{id:"sign-in-toggle",onClick:t},n)),c["default"].createElement("div",{className:"content"},c["default"].createElement("div",{className:"user"},c["default"].createElement("p",null,e)),c["default"].createElement(s.Accordion,null,c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,d.gettext("Payment Accounts")),c["default"].createElement("button",{onClick:this.props.getPayMethods},d.gettext("Change")))),c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,d.gettext("Receipts and History")),c["default"].createElement("button",{"data-activate":!0},d.gettext("View"))),c["default"].createElement(s.AccordionContent,null,c["default"].createElement("p",null,"Placeholder"))),c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,d.gettext("Subscriptions")),c["default"].createElement("button",{onClick:this.showSubscriptions,id:"show-subscriptions","data-activate":!0},d.gettext("View/Change"))),c["default"].createElement(s.AccordionContent,null,c["default"].createElement(f["default"],{subscriptions:this.props.userSubscriptions}))),c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,d.gettext("Email Address and Password")),c["default"].createElement("a",{className:"button",href:"https://mozilla.org/",target:"_blank"},d.gettext("Change")),this.props.user?c["default"].createElement("p",null,this.props.user.email):null)),c["default"].createElement(s.AccordionSection,null,c["default"].createElement("header",null,c["default"].createElement("h2",null,d.gettext("Delete Account")),c["default"].createElement("button",{"data-activate":!0},d.gettext("Delete"))),c["default"].createElement(s.AccordionContent,null,c["default"].createElement("p",null,"Placeholder content"))))))}}],[{key:"propTypes",value:{accessToken:i.PropTypes.string,getPayMethods:i.PropTypes.func.isRequired,getUserSubscriptions:i.PropTypes.func.isRequired,tokenSignIn:i.PropTypes.func.isRequired,user:i.PropTypes.object.isRequired,userSignIn:i.PropTypes.func.isRequired,userSignOut:i.PropTypes.func.isRequired,userSubscriptions:i.PropTypes.array},enumerable:!0}]),t}(i.Component);t["default"]=v,e.exports=t["default"]},211:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(14),c=r(i),s=n(208),p=r(s),f=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=[];c["default"].Children.forEach(this.props.children,function(){n.push({isActive:!1})}),n[0].isActive=!0,this.state={sections:n}}return a(t,e),u(t,null,[{key:"propTypes",value:{children:i.PropTypes.node.isRequired},enumerable:!0}]),u(t,[{key:"activate",value:function(e,t){if(null!==t.target.getAttribute("data-activate")){t.preventDefault();var n=this.state.sections;n.forEach(function(t,n){t.isActive=e===n}),this.setState({sections:n})}}},{key:"render",value:function(){var e=this,t=c["default"].Children.map(this.props.children,function(t,n){return c["default"].cloneElement(t,{activate:e.activate.bind(e,n),isActive:e.state.sections[n].isActive})});return c["default"].createElement("div",{className:"accordion",ref:"accordion"},t)}}]),t}(i.Component);t.Accordion=f;var d=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){var e=p["default"]("ac-section",{active:this.props.isActive});return c["default"].createElement("section",{onClick:this.props.activate,className:e},this.props.children)}}],[{key:"propTypes",value:{activate:c["default"].PropTypes.func.isRequired,children:c["default"].PropTypes.node.isRequired,isActive:c["default"].PropTypes.bool},enumerable:!0}]),t}(i.Component);t.AccordionSection=d;var v=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){return c["default"].createElement("div",{className:"ac-content"},this.props.children)}}],[{key:"propTypes",value:{children:c["default"].PropTypes.node.isRequired},enumerable:!0}]),t}(i.Component);t.AccordionContent=v},212:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(14),c=r(i),s=n(205),p=n(213),f=r(p),d=n(214),v=r(d),y=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"render",value:function(){if(console.log("subscriptions:",this.props.subscriptions),null===this.props.subscriptions)return c["default"].createElement(f["default"],null);var e=[];return this.props.subscriptions.forEach(function(t){e.push(c["default"].createElement("li",{key:t.id},c["default"].createElement(v["default"],t)))}),e.length?c["default"].createElement("ul",{className:"subscription-list"},e):c["default"].createElement("p",null,s.gettext("You haven't subscribed to anything yet."))}}],[{key:"propTypes",value:{subscriptions:i.PropTypes.array},enumerable:!0},{key:"defaultProps",value:{subscriptions:null},enumerable:!0}]),t}(i.Component);t["default"]=y,e.exports=t["default"]},214:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},c=n(14),s=o(c),p=n(205),f=n(215),d=r(f),v=function(e){function t(){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return u(t,e),l(t,[{key:"render",value:function(){var e=d.get(this.props.seller_product.public_id);return s["default"].createElement("div",{className:"subscription"},s["default"].createElement("div",{className:"product"},s["default"].createElement("img",{alt:"",src:e.img}),s["default"].createElement("h2",{className:"seller"},e.seller.name.en),s["default"].createElement("p",{className:"description"},e.description.en)),s["default"].createElement("div",{className:"price"},s["default"].createElement("div",null,e.price.en),s["default"].createElement("div",null,"/ ",p.gettext("month"))),s["default"].createElement("nav",null,s["default"].createElement("div",{className:"change-pay-account"},s["default"].createElement("a",{href:"#"},p.gettext("Change payment account"))),s["default"].createElement("div",{className:"cancel"},s["default"].createElement("a",{href:"#"},p.gettext("Cancel subscription")))))}}],[{key:"propTypes",value:{seller_product:c.PropTypes.shape({public_id:c.PropTypes.string}).isRequired},enumerable:!0}]),t}(c.Component);t["default"]=v,e.exports=t["default"]},218:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,u=n;l=c=i=void 0,r=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,a);if(void 0!==l){if("value"in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=a,n=u,r=!0}},i=n(14),c=r(i),s=n(207),p=r(s),f=n(219),d=r(f),v=n(205),y=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),u(t,[{key:"renderChild",value:function(){return this.props.paymentMethods&&this.props.paymentMethods.length?c["default"].createElement(d["default"],{cards:this.props.paymentMethods}):c["default"].createElement("p",{className:"no-results"},v.gettext("You haven't added any credit cards yet"))}},{key:"render",value:function(){return c["default"].createElement(p["default"],{handleClose:this.props.closeModal,title:v.gettext("Payment Methods")},c["default"].createElement("div",null,this.renderChild()))}}],[{key:"propTypes",value:{closeModal:i.PropTypes.func.isRequired,paymentMethods:i.PropTypes.array.isRequired},enumerable:!0}]),t}(i.Component);t["default"]=y,e.exports=t["default"]}});
//# sourceMappingURL=management.bundle.min.js.map