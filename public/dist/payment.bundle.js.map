{"version":3,"sources":["webpack:///./public/js/apps/payment/main.js","webpack:///./public/js/apps/payment/app.jsx","webpack:///./public/js/views/login.jsx","webpack:///./public/js/views/purchase.jsx","webpack:///./public/js/views/add-subscription.jsx","webpack:///./public/js/components/product-detail.jsx","webpack:///./public/js/views/card-listing.jsx","webpack:///./public/js/views/complete-payment.jsx"],"names":[],"mappings":"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","file":"payment.bundle.js","sourcesContent":["import $ from 'jquery';\nimport tracking from 'tracking';\nimport { init as initApp } from './app';\n\n// Common ajax settings.\n$.ajaxSetup({\n  dataType: 'json',\n});\n\ntracking.init();\ninitApp();\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/apps/payment/main.js\n **/","import 'shims';\n\nimport React, { Component, PropTypes } from 'react';\n\nimport { Connector, Provider } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport dataStore from 'data-store';\nimport ErrorMessage from 'components/error';\nimport DefaultLogin from 'views/login';\nimport DefaultPurchase from 'views/purchase';\n\nimport * as userActions from 'actions/user';\nimport { parseQuery } from 'utils';\n\n\nexport default class PaymentApp extends Component {\n\n  static propTypes = {\n    Login: PropTypes.func.isRequired,\n    Purchase: PropTypes.func.isRequired,\n    win: PropTypes.object,\n  }\n\n  static defaultProps = {\n    Login: DefaultLogin,\n    Purchase: DefaultPurchase,\n    win: window,\n  }\n\n  constructor(props) {\n    super(props);\n    var qs = parseQuery(props.win.location.href);\n    // TODO: we should validate/clean this input to raise early errors.\n    this.state = {\n      accessToken: qs.access_token,\n      productId: qs.product,\n    };\n  }\n\n  selectData(state) {\n    return {\n      app: state.app,\n      user: state.user,\n    };\n  }\n\n  render() {\n    var state = this.state;\n    var Login = this.props.Login;\n    var Purchase = this.props.Purchase;\n\n    return (\n      <main>\n        <Connector select={this.selectData}>\n          {connector => {\n            if (connector.app.error) {\n              console.log('rendering app error');\n              return <ErrorMessage error={connector.app.error} />;\n            } else if (!connector.user.signedIn) {\n              console.log('rendering login');\n              return (\n                <Login\n                  accessToken={state.accessToken}\n                  {...bindActionCreators(userActions, connector.dispatch) }\n                />\n              );\n            } else {\n              console.log('rendering purchase flow');\n              return (\n                <Purchase\n                  productId={state.productId}\n                  user={connector.user}\n                />\n              );\n            }\n          }}\n        </Connector>\n      </main>\n    );\n  }\n}\n\n\nexport function init() {\n  React.render((\n    <Provider store={dataStore}>\n      {function() {\n        return <PaymentApp/>;\n      }}\n    </Provider>\n  ), document.body);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/apps/payment/app.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport Spinner from 'components/spinner';\n\nimport { gettext } from 'utils';\nimport tracking from 'tracking';\n\n\nexport default class Login extends Component {\n\n  static propTypes = {\n    accessToken: PropTypes.string.isRequired,\n    tokenSignIn: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    tracking.setPage('/login');\n    this.props.tokenSignIn(this.props.accessToken);\n  }\n\n  render() {\n    return <Spinner text={gettext('Signing in')}/>;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/login.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport { bindActionCreators } from 'redux';\nimport { Connector } from 'react-redux';\n\nimport * as transactionActions from 'actions/transaction';\nimport * as userActions from 'actions/user';\nimport * as subscriptionActions from 'actions/subscriptions';\n\nimport DefaultAddSubscription from 'views/add-subscription';\nimport DefaultCardListing from 'views/card-listing';\nimport DefaultCompletePayment from 'views/complete-payment';\nimport DefaultBraintreeToken from 'views/braintree-token';\n\n\nexport default class Purchase extends Component {\n\n  static propTypes = {\n    AddSubscription: PropTypes.func.isRequired,\n    BraintreeToken: PropTypes.func.isRequired,\n    CardListing: PropTypes.func.isRequired,\n    CompletePayment: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n    user: PropTypes.object.isRequired,\n  }\n\n  static defaultProps = {\n    AddSubscription: DefaultAddSubscription,\n    CardListing: DefaultCardListing,\n    CompletePayment: DefaultCompletePayment,\n    BraintreeToken: DefaultBraintreeToken,\n  }\n\n  selectData(state) {\n    return {\n      transaction: state.transaction,\n      user: state.user,\n    };\n  }\n\n  renderChild(connector) {\n    var props = this.props;\n    var BraintreeToken = props.BraintreeToken;\n    var CompletePayment = props.CompletePayment;\n    var CardListing = props.CardListing;\n    var AddSubscription = props.AddSubscription;\n\n    if (connector.transaction.completed) {\n      return (\n        <CompletePayment\n          productId={props.productId}\n          userEmail={props.user.email} />\n      );\n    } else if (connector.transaction.availablePayMethods.length > 0) {\n      console.log('rendering card listing');\n      var { createSubscription } = bindActionCreators(subscriptionActions,\n                                                      connector.dispatch);\n      return (\n        <CardListing\n          createSubscription={createSubscription}\n          productId={props.productId}\n          payMethods={connector.transaction.availablePayMethods}\n          {...bindActionCreators(transactionActions, connector.dispatch)}\n        />\n      );\n    } else if (!connector.user.braintreeToken) {\n      console.log('Retreiving Braintree Token');\n      return (\n        <BraintreeToken\n          {...bindActionCreators(userActions, connector.dispatch) }\n        />\n      );\n    } else {\n      console.log('rendering card entry');\n      var { createSubscription } = bindActionCreators(subscriptionActions,\n                                                      connector.dispatch);\n      return (\n        <AddSubscription\n          cardSubmissionErrors={connector.transaction.cardSubmissionErrors}\n          braintreeToken={connector.user.braintreeToken}\n          createSubscription={createSubscription}\n          productId={props.productId}\n        />\n      );\n    }\n  }\n\n  render () {\n    return (\n      <Connector select={this.selectData}>\n        {(connector) => this.renderChild(connector)}\n      </Connector>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/purchase.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport CardForm from 'components/card-form';\nimport ProductDetail from 'components/product-detail';\nimport { default as tracking } from 'tracking';\nimport { gettext } from 'utils';\n\n\nexport default class AddSubscription extends Component {\n\n  static propTypes = {\n    braintreeToken: PropTypes.string.isRequired,\n    cardSubmissionErrors: PropTypes.object,\n    createSubscription: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/add-subscription');\n  }\n\n  handleCardSubmit(creditCard) {\n    console.log('submitting credit card to sign up for subscription',\n                this.props.productId);\n    this.props.createSubscription(this.props.productId,\n                                  creditCard,\n                                  this.props.braintreeToken);\n  }\n\n  render() {\n    return (\n      <div className=\"card-details\">\n        <ProductDetail productId={this.props.productId} />\n        <CardForm\n          submissionErrors={this.props.cardSubmissionErrors}\n          submitPrompt={gettext('Subscribe')}\n          handleCardSubmit={(card) => this.handleCardSubmit(card)}\n          id=\"braintree-form\"\n          method=\"post\"\n        />\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/add-subscription.jsx\n **/","import React, { Component, PropTypes } from 'react';\nimport * as products from 'products';\nimport { gettext } from 'utils';\n\nexport default class ProductDetail extends Component {\n\n  static propTypes = {\n    productId: PropTypes.string.isRequired,\n  }\n\n  render() {\n\n    var productData = products.get(this.props.productId);\n\n    return (\n      <div className=\"product\">\n        <h1 className=\"title\">{productData.seller.name.en}</h1>\n        <div>{productData.description.en}</div>\n        <div className=\"price\">{productData.price.en}</div>\n        <div>{gettext('per month')}</div>\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/components/product-detail.jsx\n **/","import React, { Component, PropTypes } from 'react';\n\nimport CardChoice from 'components/card-choice';\nimport ProductDetail from 'components/product-detail';\n\nimport { gettext } from 'utils';\nimport tracking from 'tracking';\n\n\nexport default class CardListing extends Component {\n\n  static propTypes = {\n    createSubscription: PropTypes.func.isRequired,\n    payMethods: PropTypes.array.isRequired,\n    payWithNewCard: PropTypes.func.isRequired,\n    productId: PropTypes.string.isRequired,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/card-listing');\n  }\n\n  handleSubmit = (card) => {\n    this.props.createSubscription(this.props.productId, card);\n  }\n\n  render() {\n    return (\n      <div>\n        <ProductDetail productId={this.props.productId} />\n        <CardChoice\n          cards={this.props.payMethods}\n          productId={this.props.productId}\n          submitButtonText={gettext('Subscribe')}\n          submitHandler={this.handleSubmit}\n        />\n        <a className=\"card-add bottom-link\" href=\"#\"\n          onClick={this.props.payWithNewCard}>\n          {gettext('Add new credit card')}\n        </a>\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/card-listing.jsx\n **/","import React, { Component } from 'react';\n\nimport ProductDetail from 'components/product-detail';\nimport SubmitButton from 'components/submit-button';\n\nimport { gettext } from 'utils';\nimport { default as tracking } from 'tracking';\n\n\nexport default class CompletePayment extends Component {\n\n  static propTypes = {\n    productId: React.PropTypes.string.isRequired,\n    userEmail: React.PropTypes.string.isRequired,\n    win: React.PropTypes.object,\n  }\n\n  static defaultProps = {\n    win: window,\n  }\n\n  componentDidMount() {\n    tracking.setPage('/complete-payment');\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n    var win = this.props.win;\n    if (win.parent !== window) {\n      // Note: the targetOrigin is wide open.\n      // Nothing sensitive should be sent whilst\n      // that's the case.\n      console.log('Telling parent to close modal.');\n      // Stringifying the object is necessary for\n      // IE9 support.\n      win.parent.postMessage(JSON.stringify({\n        event: 'purchase-completed',\n      }), '*');\n    } else {\n      console.log('Not iframed. No-op');\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"complete\">\n        <ProductDetail productId={this.props.productId} />\n        <p className=\"accepted\">{gettext('Payment Accepted')}</p>\n        <p className=\"receipt\">\n          {gettext('Your receipt has been sent to')}\n          <span className=\"email\">{this.props.userEmail}</span>\n        </p>\n        <SubmitButton text={gettext('OK')}\n                      onClick={this.handleClick} />\n      </div>\n    );\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/js/views/complete-payment.jsx\n **/"],"sourceRoot":""}